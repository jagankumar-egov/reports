var Is=Object.defineProperty;var ks=(e,r,n)=>r in e?Is(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var wt=(e,r,n)=>ks(e,typeof r!="symbol"?r+"":r,n);import{j as t,A as _s,T as Ts,I as ne,M as Ps,B as k,a as O,C as re,S as En,N as Os,b as Rs,D as As,c as Ee,L as Ve,d as ye,e as dr,f as fr,g as be,h as Ne,i as Qt,J as In,F as Wt,k as zs,l as kn,H as _n,m as ie,n as Cr,o as V,R as Tn,G as L,p as le,u as Ds,q as ot,P as fe,r as lt,s as ct,t as je,v as Y,w as ut,x as de,y as Pn,E as On,z as Bt,K as $s,O as Fs,Q as Ls,U as Ge,V as pe,W as ve,X as me,Y as ee,Z as we,_ as Ms,$ as Ns,a0 as qs,a1 as Qs,a2 as ke,a3 as pt,a4 as Wr,a5 as _e,a6 as Rn,a7 as An,a8 as zn,a9 as Ws,aa as Bs,ab as Hs,ac as Js,ad as Us,ae as Rt,af as Er,ag as Ir,ah as Dn,ai as kr,aj as hr,ak as Br,al as $n,am as Ks,an as At,ao as dt,ap as Fn,aq as Vs,ar as Gs,as as Xs,at as Ln,au as zt,av as Ys,aw as Zs,ax as ea,ay as ta,az as Mn,aA as Nn,aB as ra,aC as na,aD as Hr,aE as St,aF as sa,aG as qn,aH as Qn,aI as aa}from"./mui-BoXU9dtS.js";import{c as Wn,r as d,a as U,u as ia,d as oa,e as la,f as ca,h as Be,N as Jr,B as ua}from"./vendor-DGbgTKWD.js";import{a as da}from"./utils-NIGUFBhG.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var xr={},Ur=Wn;xr.createRoot=Ur.createRoot,xr.hydrateRoot=Ur.hydrateRoot;var Bn={exports:{}},Hn={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=d;function fa(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ha=typeof Object.is=="function"?Object.is:fa,xa=mt.useSyncExternalStore,pa=mt.useRef,ma=mt.useEffect,ga=mt.useMemo,ya=mt.useDebugValue;Hn.useSyncExternalStoreWithSelector=function(e,r,n,a,s){var o=pa(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=ga(function(){function u(j){if(!h){if(h=!0,c=j,j=a(j),s!==void 0&&i.hasValue){var S=i.value;if(s(S,j))return f=S}return f=j}if(S=f,ha(c,j))return S;var w=a(j);return s!==void 0&&s(S,w)?(c=j,S):(c=j,f=w)}var h=!1,c,f,g=n===void 0?null:n;return[function(){return u(r())},g===null?void 0:function(){return u(g())}]},[r,n,a,s]);var l=xa(e,o[0],o[1]);return ma(function(){i.hasValue=!0,i.value=l},[l]),ya(l),l};Bn.exports=Hn;var ba=Bn.exports;function va(e){e()}function ja(){let e=null,r=null;return{clear(){e=null,r=null},notify(){va(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const s=r={callback:n,next:null,prev:r};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Kr={notify(){},get:()=>[]};function wa(e,r){let n,a=Kr,s=0,o=!1;function i(w){c();const _=a.subscribe(w);let y=!1;return()=>{y||(y=!0,_(),f())}}function l(){a.notify()}function u(){S.onStateChange&&S.onStateChange()}function h(){return o}function c(){s++,n||(n=e.subscribe(u),a=ja())}function f(){s--,n&&s===0&&(n(),n=void 0,a.clear(),a=Kr)}function g(){o||(o=!0,c())}function j(){o&&(o=!1,f())}const S={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:h,trySubscribe:g,tryUnsubscribe:j,getListeners:()=>a};return S}var Sa=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ca=Sa(),Ea=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ia=Ea(),ka=()=>Ca||Ia?d.useLayoutEffect:d.useEffect,_a=ka(),Yt=Symbol.for("react-redux-context"),Zt=typeof globalThis<"u"?globalThis:{};function Ta(){if(!d.createContext)return{};const e=Zt[Yt]??(Zt[Yt]=new Map);let r=e.get(d.createContext);return r||(r=d.createContext(null),e.set(d.createContext,r)),r}var Re=Ta();function Pa(e){const{children:r,context:n,serverState:a,store:s}=e,o=d.useMemo(()=>{const u=wa(s);return{store:s,subscription:u,getServerState:a?()=>a:void 0}},[s,a]),i=d.useMemo(()=>s.getState(),[s]);_a(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),i!==s.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,i]);const l=n||Re;return d.createElement(l.Provider,{value:o},r)}var Oa=Pa;function _r(e=Re){return function(){return d.useContext(e)}}var Jn=_r();function Un(e=Re){const r=e===Re?Jn:_r(e),n=()=>{const{store:a}=r();return a};return Object.assign(n,{withTypes:()=>n}),n}var Ra=Un();function Aa(e=Re){const r=e===Re?Ra:Un(e),n=()=>r().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var za=Aa(),Da=(e,r)=>e===r;function $a(e=Re){const r=e===Re?Jn:_r(e),n=(a,s={})=>{const{equalityFn:o=Da}=typeof s=="function"?{equalityFn:s}:s,i=r(),{store:l,subscription:u,getServerState:h}=i;d.useRef(!0);const c=d.useCallback({[a.name](g){return a(g)}}[a.name],[a]),f=ba.useSyncExternalStoreWithSelector(u.addNestedSub,l.getState,h||l.getState,c,o);return d.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var Fa=$a();function Kn(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(r=0;r<e.length;r++)e[r]&&(n=Kn(e[r]))&&(a&&(a+=" "),a+=n);else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function We(){for(var e,r,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(r=Kn(e))&&(a&&(a+=" "),a+=r);return a}let La={data:""},Ma=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||La,Na=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qa=/\/\*[^]*?\*\/|  +/g,Vr=/\n+/g,Le=(e,r)=>{let n="",a="",s="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":a+=o[1]=="f"?Le(i,o):o+"{"+Le(i,o[1]=="k"?"":r)+"}":typeof i=="object"?a+=Le(i,r?r.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Le.p?Le.p(o,i):o+":"+i+";")}return n+(r&&s?r+"{"+s+"}":s)+a},Se={},Vn=e=>{if(typeof e=="object"){let r="";for(let n in e)r+=n+Vn(e[n]);return r}return e},Qa=(e,r,n,a,s)=>{let o=Vn(e),i=Se[o]||(Se[o]=(u=>{let h=0,c=11;for(;h<u.length;)c=101*c+u.charCodeAt(h++)>>>0;return"go"+c})(o));if(!Se[i]){let u=o!==e?e:(h=>{let c,f,g=[{}];for(;c=Na.exec(h.replace(qa,""));)c[4]?g.shift():c[3]?(f=c[3].replace(Vr," ").trim(),g.unshift(g[0][f]=g[0][f]||{})):g[0][c[1]]=c[2].replace(Vr," ").trim();return g[0]})(e);Se[i]=Le(s?{["@keyframes "+i]:u}:u,n?"":"."+i)}let l=n&&Se.g?Se.g:null;return n&&(Se.g=Se[i]),((u,h,c,f)=>{f?h.data=h.data.replace(f,u):h.data.indexOf(u)===-1&&(h.data=c?u+h.data:h.data+u)})(Se[i],r,a,l),i},Wa=(e,r,n)=>e.reduce((a,s,o)=>{let i=r[o];if(i&&i.call){let l=i(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=u?"."+u:l&&typeof l=="object"?l.props?"":Le(l,""):l===!1?"":l}return a+s+(i??"")},"");function Tr(e){let r=this||{},n=e.call?e(r.p):e;return Qa(n.unshift?n.raw?Wa(n,[].slice.call(arguments,1),r.p):n.reduce((a,s)=>Object.assign(a,s&&s.call?s(r.p):s),{}):n,Ma(r.target),r.g,r.o,r.k)}Tr.bind({g:1});Tr.bind({k:1});function Ba(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Gn(e,r,n){return r&&Ba(e.prototype,r),e}function G(){return G=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},G.apply(this,arguments)}function Xn(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function gt(e,r){if(e==null)return{};var n={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(r.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Gr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Xr=function(){return""},Yn=U.createContext({enqueueSnackbar:Xr,closeSnackbar:Xr}),$e={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},Yr=function(r){return r.charAt(0).toUpperCase()+r.slice(1)},Pr=function(r){return""+Yr(r.vertical)+Yr(r.horizontal)},Ct=function(r){return!!r||r===0},Et="unmounted",He="exited",Je="entering",tt="entered",Zr="exiting",Or=function(e){Xn(r,e);function r(a){var s;s=e.call(this,a)||this;var o=a.appear,i;return s.appearStatus=null,a.in?o?(i=He,s.appearStatus=Je):i=tt:a.unmountOnExit||a.mountOnEnter?i=Et:i=He,s.state={status:i},s.nextCallback=null,s}r.getDerivedStateFromProps=function(s,o){var i=s.in;return i&&o.status===Et?{status:He}:null};var n=r.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==Je&&i!==tt&&(o=Je):(i===Je||i===tt)&&(o=Zr)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o=s,i=s;return s!=null&&typeof s!="number"&&typeof s!="string"&&(i=s.exit,o=s.enter),{exit:i,enter:o}},n.updateStatus=function(s,o){s===void 0&&(s=!1),o!==null?(this.cancelNextCallback(),o===Je?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===He&&this.setState({status:Et})},n.performEnter=function(s){var o=this,i=this.props.enter,l=s,u=this.getTimeouts();if(!s&&!i){this.safeSetState({status:tt},function(){o.props.onEntered&&o.props.onEntered(o.node,l)});return}this.props.onEnter&&this.props.onEnter(this.node,l),this.safeSetState({status:Je},function(){o.props.onEntering&&o.props.onEntering(o.node,l),o.onTransitionEnd(u.enter,function(){o.safeSetState({status:tt},function(){o.props.onEntered&&o.props.onEntered(o.node,l)})})})},n.performExit=function(){var s=this,o=this.props.exit,i=this.getTimeouts();if(!o){this.safeSetState({status:He},function(){s.props.onExited&&s.props.onExited(s.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:Zr},function(){s.props.onExiting&&s.props.onExiting(s.node),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:He},function(){s.props.onExited&&s.props.onExited(s.node)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,i=!0;return this.nextCallback=function(){i&&(i=!1,o.nextCallback=null,s())},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var i=s==null&&!this.props.addEndListener;if(!this.node||i){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Et)return null;var o=this.props,i=o.children,l=gt(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return i(s,l)},Gn(r,[{key:"node",get:function(){var s,o=(s=this.props.nodeRef)===null||s===void 0?void 0:s.current;if(!o)throw new Error("notistack - Custom snackbar is not refForwarding");return o}}]),r}(U.Component);function Ue(){}Or.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ue,onEntering:Ue,onEntered:Ue,onExit:Ue,onExiting:Ue,onExited:Ue};function en(e,r){typeof e=="function"?e(r):e&&(e.current=r)}function pr(e,r){return d.useMemo(function(){return e==null&&r==null?null:function(n){en(e,n),en(r,n)}},[e,r])}function Dt(e){var r=e.timeout,n=e.style,a=n===void 0?{}:n,s=e.mode;return{duration:typeof r=="object"?r[s]||0:r,easing:a.transitionTimingFunction,delay:a.transitionDelay}}var mr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Zn=function(r){r.scrollTop=r.scrollTop},tn=function(r){return Math.round(r)+"ms"};function Ke(e,r){e===void 0&&(e=["all"]);var n=r||{},a=n.duration,s=a===void 0?300:a,o=n.easing,i=o===void 0?mr.easeInOut:o,l=n.delay,u=l===void 0?0:l,h=Array.isArray(e)?e:[e];return h.map(function(c){var f=typeof s=="string"?s:tn(s),g=typeof u=="string"?u:tn(u);return c+" "+f+" "+i+" "+g}).join(",")}function Ha(e){return e&&e.ownerDocument||document}function es(e){var r=Ha(e);return r.defaultView||window}function Ja(e,r){r===void 0&&(r=166);var n;function a(){for(var s=this,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var u=function(){e.apply(s,i)};clearTimeout(n),n=setTimeout(u,r)}return a.clear=function(){clearTimeout(n)},a}function Ua(e,r){var n=r.getBoundingClientRect(),a=es(r),s;if(r.fakeTransform)s=r.fakeTransform;else{var o=a.getComputedStyle(r);s=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var i=0,l=0;if(s&&s!=="none"&&typeof s=="string"){var u=s.split("(")[1].split(")")[0].split(",");i=parseInt(u[4],10),l=parseInt(u[5],10)}switch(e){case"left":return"translateX("+(a.innerWidth+i-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-i)+"px)";case"up":return"translateY("+(a.innerHeight+l-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-l)+"px)"}}function It(e,r){if(r){var n=Ua(e,r);n&&(r.style.webkitTransform=n,r.style.transform=n)}}var ts=d.forwardRef(function(e,r){var n=e.children,a=e.direction,s=a===void 0?"down":a,o=e.in,i=e.style,l=e.timeout,u=l===void 0?0:l,h=e.onEnter,c=e.onEntered,f=e.onExit,g=e.onExited,j=gt(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),S=d.useRef(null),w=pr(n.ref,S),_=pr(w,r),y=function(b,m){It(s,b),Zn(b),h&&h(b,m)},C=function(b){var m=(i==null?void 0:i.transitionTimingFunction)||mr.easeOut,T=Dt({timeout:u,mode:"enter",style:G({},i,{transitionTimingFunction:m})});b.style.webkitTransition=Ke("-webkit-transform",T),b.style.transition=Ke("transform",T),b.style.webkitTransform="none",b.style.transform="none"},E=function(b){var m=(i==null?void 0:i.transitionTimingFunction)||mr.sharp,T=Dt({timeout:u,mode:"exit",style:G({},i,{transitionTimingFunction:m})});b.style.webkitTransition=Ke("-webkit-transform",T),b.style.transition=Ke("transform",T),It(s,b),f&&f(b)},x=function(b){b.style.webkitTransition="",b.style.transition="",g&&g(b)},v=d.useCallback(function(){S.current&&It(s,S.current)},[s]);return d.useEffect(function(){if(!(o||s==="down"||s==="right")){var p=Ja(function(){S.current&&It(s,S.current)}),b=es(S.current);return b.addEventListener("resize",p),function(){p.clear(),b.removeEventListener("resize",p)}}},[s,o]),d.useEffect(function(){o||v()},[o,v]),d.createElement(Or,Object.assign({appear:!0,nodeRef:S,onEnter:y,onEntered:c,onEntering:C,onExit:E,onExited:x,in:o,timeout:u},j),function(p,b){return d.cloneElement(n,G({ref:_,style:G({visibility:p==="exited"&&!o?"hidden":void 0},i,{},n.props.style)},b))})});ts.displayName="Slide";var Ht=function(r){return U.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},r))},Ka=function(){return U.createElement(Ht,null,U.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},Va=function(){return U.createElement(Ht,null,U.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},Ga=function(){return U.createElement(Ht,null,U.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},Xa=function(){return U.createElement(Ht,null,U.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},Ya={default:void 0,success:U.createElement(Ka,null),warning:U.createElement(Va,null),error:U.createElement(Ga,null),info:U.createElement(Xa,null)},Me={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:Ya,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:ts,transitionDuration:{enter:225,exit:195}},Za=function(r,n){var a=function(o){return typeof o=="number"||o===null};return a(r)?r:a(n)?n:Me.autoHideDuration},ei=function(r,n){var a=function(o,i){return i.some(function(l){return typeof o===l})};return a(r,["string","number"])?r:a(r,["object"])?G({},Me.transitionDuration,{},a(n,["object"])&&n,{},r):a(n,["string","number"])?n:a(n,["object"])?G({},Me.transitionDuration,{},n):Me.transitionDuration},ti=function(r,n){return function(a,s){return s===void 0&&(s=!1),s?G({},Me[a],{},n[a],{},r[a]):a==="autoHideDuration"?Za(r.autoHideDuration,n.autoHideDuration):a==="transitionDuration"?ei(r.transitionDuration,n.transitionDuration):r[a]||n[a]||Me[a]}};function yt(e){return Object.entries(e).reduce(function(r,n){var a,s=n[0],o=n[1];return G({},r,(a={},a[s]=Tr(o),a))},{})}var Xe={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(r){return"notistack-MuiContent-"+r}},rn=yt({root:{height:0},entered:{height:"auto"}}),er="0px",tr=175,rs=d.forwardRef(function(e,r){var n=e.children,a=e.in,s=e.onExited,o=d.useRef(null),i=d.useRef(null),l=pr(r,i),u=function(){return o.current?o.current.clientHeight:0},h=function(w){w.style.height=er},c=function(w){var _=u(),y=Dt({timeout:tr,mode:"enter"}),C=y.duration,E=y.easing;w.style.transitionDuration=typeof C=="string"?C:C+"ms",w.style.height=_+"px",w.style.transitionTimingFunction=E||""},f=function(w){w.style.height="auto"},g=function(w){w.style.height=u()+"px"},j=function(w){Zn(w);var _=Dt({timeout:tr,mode:"exit"}),y=_.duration,C=_.easing;w.style.transitionDuration=typeof y=="string"?y:y+"ms",w.style.height=er,w.style.transitionTimingFunction=C||""};return d.createElement(Or,{in:a,unmountOnExit:!0,onEnter:h,onEntered:f,onEntering:c,onExit:g,onExited:s,onExiting:j,nodeRef:i,timeout:tr},function(S,w){return d.createElement("div",Object.assign({ref:l,className:We(rn.root,S==="entered"&&rn.entered),style:G({pointerEvents:"all",overflow:"hidden",minHeight:er,transition:Ke("height")},S==="entered"&&{overflow:"visible"},{},S==="exited"&&!a&&{visibility:"hidden"})},w),d.createElement("div",{ref:o,className:Xe.CollapseWrapper,style:{display:"flex",width:"100%"}},n))})});rs.displayName="Collapse";var nn={right:"left",left:"right",bottom:"up",top:"down"},ri=function(r){return r.horizontal!=="center"?nn[r.horizontal]:nn[r.vertical]},ni=function(r){return"anchorOrigin"+Pr(r)},si=function(r){r===void 0&&(r={});var n={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(r).filter(function(a){return!n[a]}).reduce(function(a,s){var o;return G({},a,(o={},o[s]=r[s],o))},{})},ai=function(){};function it(e,r){return e.reduce(function(n,a){return a==null?n:function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var u=[].concat(i);r&&u.indexOf(r)===-1&&u.push(r),n.apply(this,u),a.apply(this,u)}},ai)}var ii=typeof window<"u"?d.useLayoutEffect:d.useEffect;function sn(e){var r=d.useRef(e);return ii(function(){r.current=e}),d.useCallback(function(){return r.current.apply(void 0,arguments)},[])}var ns=d.forwardRef(function(e,r){var n=e.children,a=e.className,s=e.autoHideDuration,o=e.disableWindowBlurListener,i=o===void 0?!1:o,l=e.onClose,u=e.id,h=e.open,c=e.SnackbarProps,f=c===void 0?{}:c,g=d.useRef(),j=sn(function(){l&&l.apply(void 0,arguments)}),S=sn(function(E){!l||E==null||(g.current&&clearTimeout(g.current),g.current=setTimeout(function(){j(null,"timeout",u)},E))});d.useEffect(function(){return h&&S(s),function(){g.current&&clearTimeout(g.current)}},[h,s,S]);var w=function(){g.current&&clearTimeout(g.current)},_=d.useCallback(function(){s!=null&&S(s*.5)},[s,S]),y=function(x){f.onMouseEnter&&f.onMouseEnter(x),w()},C=function(x){f.onMouseLeave&&f.onMouseLeave(x),_()};return d.useEffect(function(){if(!i&&h)return window.addEventListener("focus",_),window.addEventListener("blur",w),function(){window.removeEventListener("focus",_),window.removeEventListener("blur",w)}},[i,_,h]),d.createElement("div",Object.assign({ref:r},f,{className:We(Xe.Snackbar,a),onMouseEnter:y,onMouseLeave:C}),n)});ns.displayName="Snackbar";var rr,oi=yt({root:(rr={display:"flex",flexWrap:"wrap",flexGrow:1},rr[$e.upSm]={flexGrow:"initial",minWidth:"288px"},rr)}),ss=d.forwardRef(function(e,r){var n=e.className,a=gt(e,["className"]);return U.createElement("div",Object.assign({ref:r,className:We(oi.root,n)},a))});ss.displayName="SnackbarContent";var rt=yt({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),an="notistack-snackbar",as=d.forwardRef(function(e,r){var n=e.id,a=e.message,s=e.action,o=e.iconVariant,i=e.variant,l=e.hideIconVariant,u=e.style,h=e.className,c=o[i],f=s;return typeof f=="function"&&(f=f(n)),U.createElement(ss,{ref:r,role:"alert","aria-describedby":an,style:u,className:We(Xe.MuiContent,Xe.MuiContentVariant(i),rt.root,rt[i],h,!l&&c&&rt.lessPadding)},U.createElement("div",{id:an,className:rt.message},l?null:c,a),f&&U.createElement("div",{className:rt.action},f))});as.displayName="MaterialDesignContent";var li=d.memo(as),ci=yt({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),ui=function(r){var n=d.useRef(),a=d.useState(!0),s=a[0],o=a[1],i=it([r.snack.onClose,r.onClose]),l=function(){r.snack.requestClose&&i(null,"instructed",r.snack.id)},u=d.useCallback(function(){n.current=setTimeout(function(){o(function(T){return!T})},125)},[]);d.useEffect(function(){return function(){n.current&&clearTimeout(n.current)}},[]);var h=r.snack,c=r.classes,f=r.Component,g=f===void 0?li:f,j=d.useMemo(function(){return si(c)},[c]),S=h.open,w=h.SnackbarProps,_=h.TransitionComponent,y=h.TransitionProps,C=h.transitionDuration,E=h.disableWindowBlurListener,x=h.content,v=gt(h,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),p=G({direction:ri(v.anchorOrigin),timeout:C},y),b=x;typeof b=="function"&&(b=b(v.id,v.message));var m=["onEnter","onEntered","onExit","onExited"].reduce(function(T,R){var M;return G({},T,(M={},M[R]=it([r.snack[R],r[R]],v.id),M))},{});return U.createElement(rs,{in:s,onExited:m.onExited},U.createElement(ns,{open:S,id:v.id,disableWindowBlurListener:E,autoHideDuration:v.autoHideDuration,className:We(ci.wrappedRoot,j.root,j[ni(v.anchorOrigin)]),SnackbarProps:w,onClose:i},U.createElement(_,Object.assign({},p,{appear:!0,in:S,onExit:m.onExit,onExited:u,onEnter:m.onEnter,onEntered:it([m.onEntered,l],v.id)}),b||U.createElement(g,Object.assign({},v)))))},nt,nr,kt,_t,sr,Ce={view:{default:20},snackbar:{default:6,dense:2}},on="."+Xe.CollapseWrapper,ar=16,Tt=yt({root:(nt={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Ke(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},nt[on]={padding:Ce.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},nt.maxWidth="calc(100% - "+Ce.view.default*2+"px)",nt[$e.downXs]={width:"100%",maxWidth:"calc(100% - "+ar*2+"px)"},nt),rootDense:(nr={},nr[on]={padding:Ce.snackbar.dense+"px 0px"},nr),top:{top:Ce.view.default-Ce.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Ce.view.default-Ce.snackbar.default+"px",flexDirection:"column-reverse"},left:(kt={left:Ce.view.default+"px"},kt[$e.upSm]={alignItems:"flex-start"},kt[$e.downXs]={left:ar+"px"},kt),right:(_t={right:Ce.view.default+"px"},_t[$e.upSm]={alignItems:"flex-end"},_t[$e.downXs]={right:ar+"px"},_t),center:(sr={left:"50%",transform:"translateX(-50%)"},sr[$e.upSm]={alignItems:"center"},sr)}),di=function(r){var n=r.classes,a=n===void 0?{}:n,s=r.anchorOrigin,o=r.dense,i=r.children,l=We(Xe.SnackbarContainer,Tt[s.vertical],Tt[s.horizontal],Tt.root,a.containerRoot,a["containerAnchorOrigin"+Pr(s)],o&&Tt.rootDense);return U.createElement("div",{className:l},i)},fi=d.memo(di),ln=function(r){var n=typeof r=="string"||d.isValidElement(r);return!n},hi=function(e){Xn(r,e);function r(a){var s;return s=e.call(this,a)||this,s.enqueueSnackbar=function(o,i){if(i===void 0&&(i={}),o==null)throw new Error("enqueueSnackbar called with invalid argument");var l=ln(o)?o:i,u=ln(o)?o.message:o,h=l.key,c=l.preventDuplicate,f=gt(l,["key","preventDuplicate"]),g=Ct(h),j=g?h:new Date().getTime()+Math.random(),S=ti(f,s.props),w=G({id:j},f,{message:u,open:!0,entered:!1,requestClose:!1,persist:S("persist"),action:S("action"),content:S("content"),variant:S("variant"),anchorOrigin:S("anchorOrigin"),disableWindowBlurListener:S("disableWindowBlurListener"),autoHideDuration:S("autoHideDuration"),hideIconVariant:S("hideIconVariant"),TransitionComponent:S("TransitionComponent"),transitionDuration:S("transitionDuration"),TransitionProps:S("TransitionProps",!0),iconVariant:S("iconVariant",!0),style:S("style",!0),SnackbarProps:S("SnackbarProps",!0),className:We(s.props.className,f.className)});return w.persist&&(w.autoHideDuration=void 0),s.setState(function(_){if(c===void 0&&s.props.preventDuplicate||c){var y=function(v){return g?v.id===j:v.message===u},C=_.queue.findIndex(y)>-1,E=_.snacks.findIndex(y)>-1;if(C||E)return _}return s.handleDisplaySnack(G({},_,{queue:[].concat(_.queue,[w])}))}),j},s.handleDisplaySnack=function(o){var i=o.snacks;return i.length>=s.maxSnack?s.handleDismissOldest(o):s.processQueue(o)},s.processQueue=function(o){var i=o.queue,l=o.snacks;return i.length>0?G({},o,{snacks:[].concat(l,[i[0]]),queue:i.slice(1,i.length)}):o},s.handleDismissOldest=function(o){if(o.snacks.some(function(c){return!c.open||c.requestClose}))return o;var i=!1,l=!1,u=o.snacks.reduce(function(c,f){return c+(f.open&&f.persist?1:0)},0);u===s.maxSnack&&(l=!0);var h=o.snacks.map(function(c){return!i&&(!c.persist||l)?(i=!0,c.entered?(c.onClose&&c.onClose(null,"maxsnack",c.id),s.props.onClose&&s.props.onClose(null,"maxsnack",c.id),G({},c,{open:!1})):G({},c,{requestClose:!0})):G({},c)});return G({},o,{snacks:h})},s.handleEnteredSnack=function(o,i,l){if(!Ct(l))throw new Error("handleEnteredSnack Cannot be called with undefined key");s.setState(function(u){var h=u.snacks;return{snacks:h.map(function(c){return c.id===l?G({},c,{entered:!0}):G({},c)})}})},s.handleCloseSnack=function(o,i,l){s.props.onClose&&s.props.onClose(o,i,l);var u=l===void 0;s.setState(function(h){var c=h.snacks,f=h.queue;return{snacks:c.map(function(g){return!u&&g.id!==l?G({},g):g.entered?G({},g,{open:!1}):G({},g,{requestClose:!0})}),queue:f.filter(function(g){return g.id!==l})}})},s.closeSnackbar=function(o){var i=s.state.snacks.find(function(l){return l.id===o});Ct(o)&&i&&i.onClose&&i.onClose(null,"instructed",o),s.handleCloseSnack(null,"instructed",o)},s.handleExitedSnack=function(o,i){if(!Ct(i))throw new Error("handleExitedSnack Cannot be called with undefined key");s.setState(function(l){var u=s.processQueue(G({},l,{snacks:l.snacks.filter(function(h){return h.id!==i})}));return u.queue.length===0?u:s.handleDismissOldest(u)})},s.enqueueSnackbar,s.closeSnackbar,s.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:s.enqueueSnackbar.bind(Gr(s)),closeSnackbar:s.closeSnackbar.bind(Gr(s))}},s}var n=r.prototype;return n.render=function(){var s=this,o=this.state.contextValue,i=this.props,l=i.domRoot,u=i.children,h=i.dense,c=h===void 0?!1:h,f=i.Components,g=f===void 0?{}:f,j=i.classes,S=this.state.snacks.reduce(function(_,y){var C,E=Pr(y.anchorOrigin),x=_[E]||[];return G({},_,(C={},C[E]=[].concat(x,[y]),C))},{}),w=Object.keys(S).map(function(_){var y=S[_],C=y[0];return U.createElement(fi,{key:_,dense:c,anchorOrigin:C.anchorOrigin,classes:j},y.map(function(E){return U.createElement(ui,{key:E.id,snack:E,classes:j,Component:g[E.variant],onClose:s.handleCloseSnack,onEnter:s.props.onEnter,onExit:s.props.onExit,onExited:it([s.handleExitedSnack,s.props.onExited],E.id),onEntered:it([s.handleEnteredSnack,s.props.onEntered],E.id)})}))});return U.createElement(Yn.Provider,{value:o},u,l?Wn.createPortal(w,l):w)},Gn(r,[{key:"maxSnack",get:function(){return this.props.maxSnack||Me.maxSnack}}]),r}(d.Component),xi=function(){return d.useContext(Yn)};function ae(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var pi=typeof Symbol=="function"&&Symbol.observable||"@@observable",cn=pi,ir=()=>Math.random().toString(36).substring(7).split("").join("."),mi={INIT:`@@redux/INIT${ir()}`,REPLACE:`@@redux/REPLACE${ir()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ir()}`},$t=mi;function Rr(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function is(e,r,n){if(typeof e!="function")throw new Error(ae(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ae(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ae(1));return n(is)(e,r)}let a=e,s=r,o=new Map,i=o,l=0,u=!1;function h(){i===o&&(i=new Map,o.forEach((_,y)=>{i.set(y,_)}))}function c(){if(u)throw new Error(ae(3));return s}function f(_){if(typeof _!="function")throw new Error(ae(4));if(u)throw new Error(ae(5));let y=!0;h();const C=l++;return i.set(C,_),function(){if(y){if(u)throw new Error(ae(6));y=!1,h(),i.delete(C),o=null}}}function g(_){if(!Rr(_))throw new Error(ae(7));if(typeof _.type>"u")throw new Error(ae(8));if(typeof _.type!="string")throw new Error(ae(17));if(u)throw new Error(ae(9));try{u=!0,s=a(s,_)}finally{u=!1}return(o=i).forEach(C=>{C()}),_}function j(_){if(typeof _!="function")throw new Error(ae(10));a=_,g({type:$t.REPLACE})}function S(){const _=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(ae(11));function C(){const x=y;x.next&&x.next(c())}return C(),{unsubscribe:_(C)}},[cn](){return this}}}return g({type:$t.INIT}),{dispatch:g,subscribe:f,getState:c,replaceReducer:j,[cn]:S}}function gi(e){Object.keys(e).forEach(r=>{const n=e[r];if(typeof n(void 0,{type:$t.INIT})>"u")throw new Error(ae(12));if(typeof n(void 0,{type:$t.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ae(13))})}function yi(e){const r=Object.keys(e),n={};for(let o=0;o<r.length;o++){const i=r[o];typeof e[i]=="function"&&(n[i]=e[i])}const a=Object.keys(n);let s;try{gi(n)}catch(o){s=o}return function(i={},l){if(s)throw s;let u=!1;const h={};for(let c=0;c<a.length;c++){const f=a[c],g=n[f],j=i[f],S=g(j,l);if(typeof S>"u")throw l&&l.type,new Error(ae(14));h[f]=S,u=u||S!==j}return u=u||a.length!==Object.keys(i).length,u?h:i}}function Ft(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,n)=>(...a)=>r(n(...a)))}function bi(...e){return r=>(n,a)=>{const s=r(n,a);let o=()=>{throw new Error(ae(15))};const i={getState:s.getState,dispatch:(u,...h)=>o(u,...h)},l=e.map(u=>u(i));return o=Ft(...l)(s.dispatch),{...s,dispatch:o}}}function vi(e){return Rr(e)&&"type"in e&&typeof e.type=="string"}var os=Symbol.for("immer-nothing"),un=Symbol.for("immer-draftable"),he=Symbol.for("immer-state");function ge(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ye=Object.getPrototypeOf;function qe(e){return!!e&&!!e[he]}function Te(e){var r;return e?ls(e)||Array.isArray(e)||!!e[un]||!!((r=e.constructor)!=null&&r[un])||Ut(e)||Kt(e):!1}var ji=Object.prototype.constructor.toString();function ls(e){if(!e||typeof e!="object")return!1;const r=Ye(e);if(r===null)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ji}function Lt(e,r){Jt(e)===0?Reflect.ownKeys(e).forEach(n=>{r(n,e[n],e)}):e.forEach((n,a)=>r(a,n,e))}function Jt(e){const r=e[he];return r?r.type_:Array.isArray(e)?1:Ut(e)?2:Kt(e)?3:0}function gr(e,r){return Jt(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function cs(e,r,n){const a=Jt(e);a===2?e.set(r,n):a===3?e.add(n):e[r]=n}function wi(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Ut(e){return e instanceof Map}function Kt(e){return e instanceof Set}function Fe(e){return e.copy_||e.base_}function yr(e,r){if(Ut(e))return new Map(e);if(Kt(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ls(e);if(r===!0||r==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[he];let s=Reflect.ownKeys(a);for(let o=0;o<s.length;o++){const i=s[o],l=a[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[i]})}return Object.create(Ye(e),a)}else{const a=Ye(e);if(a!==null&&n)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function Ar(e,r=!1){return Vt(e)||qe(e)||!Te(e)||(Jt(e)>1&&(e.set=e.add=e.clear=e.delete=Si),Object.freeze(e),r&&Object.entries(e).forEach(([n,a])=>Ar(a,!0))),e}function Si(){ge(2)}function Vt(e){return Object.isFrozen(e)}var Ci={};function Qe(e){const r=Ci[e];return r||ge(0,e),r}var ft;function us(){return ft}function Ei(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dn(e,r){r&&(Qe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function br(e){vr(e),e.drafts_.forEach(Ii),e.drafts_=null}function vr(e){e===ft&&(ft=e.parent_)}function fn(e){return ft=Ei(ft,e)}function Ii(e){const r=e[he];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function hn(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return e!==void 0&&e!==n?(n[he].modified_&&(br(r),ge(4)),Te(e)&&(e=Mt(r,e),r.parent_||Nt(r,e)),r.patches_&&Qe("Patches").generateReplacementPatches_(n[he].base_,e,r.patches_,r.inversePatches_)):e=Mt(r,n,[]),br(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==os?e:void 0}function Mt(e,r,n){if(Vt(r))return r;const a=r[he];if(!a)return Lt(r,(s,o)=>xn(e,a,r,s,o,n)),r;if(a.scope_!==e)return r;if(!a.modified_)return Nt(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,i=!1;a.type_===3&&(o=new Set(s),s.clear(),i=!0),Lt(o,(l,u)=>xn(e,a,s,l,u,n,i)),Nt(e,s,!1),n&&e.patches_&&Qe("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function xn(e,r,n,a,s,o,i){if(qe(s)){const l=o&&r&&r.type_!==3&&!gr(r.assigned_,a)?o.concat(a):void 0,u=Mt(e,s,l);if(cs(n,a,u),qe(u))e.canAutoFreeze_=!1;else return}else i&&n.add(s);if(Te(s)&&!Vt(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Mt(e,s),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&Nt(e,s)}}function Nt(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ar(r,n)}function ki(e,r){const n=Array.isArray(e),a={type_:n?1:0,scope_:r?r.scope_:us(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,o=zr;n&&(s=[a],o=ht);const{revoke:i,proxy:l}=Proxy.revocable(s,o);return a.draft_=l,a.revoke_=i,l}var zr={get(e,r){if(r===he)return e;const n=Fe(e);if(!gr(n,r))return _i(e,n,r);const a=n[r];return e.finalized_||!Te(a)?a:a===or(e.base_,r)?(lr(e),e.copy_[r]=wr(a,e)):a},has(e,r){return r in Fe(e)},ownKeys(e){return Reflect.ownKeys(Fe(e))},set(e,r,n){const a=ds(Fe(e),r);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=or(Fe(e),r),o=s==null?void 0:s[he];if(o&&o.base_===n)return e.copy_[r]=n,e.assigned_[r]=!1,!0;if(wi(n,s)&&(n!==void 0||gr(e.base_,r)))return!0;lr(e),jr(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_[r]=!0),!0},deleteProperty(e,r){return or(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,lr(e),jr(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=Fe(e),a=Reflect.getOwnPropertyDescriptor(n,r);return a&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:a.enumerable,value:n[r]}},defineProperty(){ge(11)},getPrototypeOf(e){return Ye(e.base_)},setPrototypeOf(){ge(12)}},ht={};Lt(zr,(e,r)=>{ht[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});ht.deleteProperty=function(e,r){return ht.set.call(this,e,r,void 0)};ht.set=function(e,r,n){return zr.set.call(this,e[0],r,n,e[0])};function or(e,r){const n=e[he];return(n?Fe(n):e)[r]}function _i(e,r,n){var s;const a=ds(r,n);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function ds(e,r){if(!(r in e))return;let n=Ye(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,r);if(a)return a;n=Ye(n)}}function jr(e){e.modified_||(e.modified_=!0,e.parent_&&jr(e.parent_))}function lr(e){e.copy_||(e.copy_=yr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ti=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,n,a)=>{if(typeof r=="function"&&typeof n!="function"){const o=n;n=r;const i=this;return function(u=o,...h){return i.produce(u,c=>n.call(this,c,...h))}}typeof n!="function"&&ge(6),a!==void 0&&typeof a!="function"&&ge(7);let s;if(Te(r)){const o=fn(this),i=wr(r,void 0);let l=!0;try{s=n(i),l=!1}finally{l?br(o):vr(o)}return dn(o,a),hn(s,o)}else if(!r||typeof r!="object"){if(s=n(r),s===void 0&&(s=r),s===os&&(s=void 0),this.autoFreeze_&&Ar(s,!0),a){const o=[],i=[];Qe("Patches").generateReplacementPatches_(r,s,o,i),a(o,i)}return s}else ge(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(i,...l)=>this.produceWithPatches(i,u=>r(u,...l));let a,s;return[this.produce(r,n,(i,l)=>{a=i,s=l}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Te(e)||ge(8),qe(e)&&(e=Pi(e));const r=fn(this),n=wr(e,void 0);return n[he].isManual_=!0,vr(r),n}finishDraft(e,r){const n=e&&e[he];(!n||!n.isManual_)&&ge(9);const{scope_:a}=n;return dn(a,r),hn(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Qe("Patches").applyPatches_;return qe(e)?a(e,r):this.produce(e,s=>a(s,r))}};function wr(e,r){const n=Ut(e)?Qe("MapSet").proxyMap_(e,r):Kt(e)?Qe("MapSet").proxySet_(e,r):ki(e,r);return(r?r.scope_:us()).drafts_.push(n),n}function Pi(e){return qe(e)||ge(10,e),fs(e)}function fs(e){if(!Te(e)||Vt(e))return e;const r=e[he];let n;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=yr(e,r.scope_.immer_.useStrictShallowCopy_)}else n=yr(e,!0);return Lt(n,(a,s)=>{cs(n,a,fs(s))}),r&&(r.finalized_=!1),n}var xe=new Ti,hs=xe.produce;xe.produceWithPatches.bind(xe);xe.setAutoFreeze.bind(xe);xe.setUseStrictShallowCopy.bind(xe);xe.applyPatches.bind(xe);xe.createDraft.bind(xe);xe.finishDraft.bind(xe);function xs(e){return({dispatch:n,getState:a})=>s=>o=>typeof o=="function"?o(n,a,e):s(o)}var Oi=xs(),Ri=xs,Ai=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ft:Ft.apply(null,arguments)};function pn(e,r){function n(...a){if(r){let s=r(...a);if(!s)throw new Error(Ie(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>vi(a)&&a.type===e,n}var ps=class at extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,at.prototype)}static get[Symbol.species](){return at}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new at(...r[0].concat(this)):new at(...r.concat(this))}};function mn(e){return Te(e)?hs(e,()=>{}):e}function Pt(e,r,n){return e.has(r)?e.get(r):e.set(r,n(r)).get(r)}function zi(e){return typeof e=="boolean"}var Di=()=>function(r){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:o=!0}=r??{};let i=new ps;return n&&(zi(n)?i.push(Oi):i.push(Ri(n.extraArgument))),i},$i="RTK_autoBatch",gn=e=>r=>{setTimeout(r,e)},Fi=(e={type:"raf"})=>r=>(...n)=>{const a=r(...n);let s=!0,o=!1,i=!1;const l=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gn(10):e.type==="callback"?e.queueNotification:gn(e.timeout),h=()=>{i=!1,o&&(o=!1,l.forEach(c=>c()))};return Object.assign({},a,{subscribe(c){const f=()=>s&&c(),g=a.subscribe(f);return l.add(c),()=>{g(),l.delete(c)}},dispatch(c){var f;try{return s=!((f=c==null?void 0:c.meta)!=null&&f[$i]),o=!s,o&&(i||(i=!0,u(h))),a.dispatch(c)}finally{s=!0}}})},Li=e=>function(n){const{autoBatch:a=!0}=n??{};let s=new ps(e);return a&&s.push(Fi(typeof a=="object"?a:void 0)),s};function Mi(e){const r=Di(),{reducer:n=void 0,middleware:a,devTools:s=!0,preloadedState:o=void 0,enhancers:i=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Rr(n))l=yi(n);else throw new Error(Ie(1));let u;typeof a=="function"?u=a(r):u=r();let h=Ft;s&&(h=Ai({trace:!1,...typeof s=="object"&&s}));const c=bi(...u),f=Li(c);let g=typeof i=="function"?i(f):f();const j=h(...g);return is(l,o,j)}function ms(e){const r={},n=[];let a;const s={addCase(o,i){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(Ie(28));if(l in r)throw new Error(Ie(29));return r[l]=i,s},addMatcher(o,i){return n.push({matcher:o,reducer:i}),s},addDefaultCase(o){return a=o,s}};return e(s),[r,n,a]}function Ni(e){return typeof e=="function"}function qi(e,r){let[n,a,s]=ms(r),o;if(Ni(e))o=()=>mn(e());else{const l=mn(e);o=()=>l}function i(l=o(),u){let h=[n[u.type],...a.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return h.filter(c=>!!c).length===0&&(h=[s]),h.reduce((c,f)=>{if(f)if(qe(c)){const j=f(c,u);return j===void 0?c:j}else{if(Te(c))return hs(c,g=>f(g,u));{const g=f(c,u);if(g===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return c},l)}return i.getInitialState=o,i}var Qi=Symbol.for("rtk-slice-createasyncthunk");function Wi(e,r){return`${e}/${r}`}function Bi({creators:e}={}){var n;const r=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Qi];return function(s){const{name:o,reducerPath:i=o}=s;if(!o)throw new Error(Ie(11));const l=(typeof s.reducers=="function"?s.reducers(Ui()):s.reducers)||{},u=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,v){const p=typeof x=="string"?x:x.type;if(!p)throw new Error(Ie(12));if(p in h.sliceCaseReducersByType)throw new Error(Ie(13));return h.sliceCaseReducersByType[p]=v,c},addMatcher(x,v){return h.sliceMatchers.push({matcher:x,reducer:v}),c},exposeAction(x,v){return h.actionCreators[x]=v,c},exposeCaseReducer(x,v){return h.sliceCaseReducersByName[x]=v,c}};u.forEach(x=>{const v=l[x],p={reducerName:x,type:Wi(o,x),createNotation:typeof s.reducers=="function"};Vi(v)?Xi(p,v,c,r):Ki(p,v,c)});function f(){const[x={},v=[],p=void 0]=typeof s.extraReducers=="function"?ms(s.extraReducers):[s.extraReducers],b={...x,...h.sliceCaseReducersByType};return qi(s.initialState,m=>{for(let T in b)m.addCase(T,b[T]);for(let T of h.sliceMatchers)m.addMatcher(T.matcher,T.reducer);for(let T of v)m.addMatcher(T.matcher,T.reducer);p&&m.addDefaultCase(p)})}const g=x=>x,j=new Map,S=new WeakMap;let w;function _(x,v){return w||(w=f()),w(x,v)}function y(){return w||(w=f()),w.getInitialState()}function C(x,v=!1){function p(m){let T=m[x];return typeof T>"u"&&v&&(T=Pt(S,p,y)),T}function b(m=g){const T=Pt(j,v,()=>new WeakMap);return Pt(T,m,()=>{const R={};for(const[M,N]of Object.entries(s.selectors??{}))R[M]=Hi(N,m,()=>Pt(S,m,y),v);return R})}return{reducerPath:x,getSelectors:b,get selectors(){return b(p)},selectSlice:p}}const E={name:o,reducer:_,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:y,...C(i),injectInto(x,{reducerPath:v,...p}={}){const b=v??i;return x.inject({reducerPath:b,reducer:_},p),{...E,...C(b,!0)}}};return E}}function Hi(e,r,n,a){function s(o,...i){let l=r(o);return typeof l>"u"&&a&&(l=n()),e(l,...i)}return s.unwrapped=e,s}var Ji=Bi();function Ui(){function e(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:e}}function Ki({type:e,reducerName:r,createNotation:n},a,s){let o,i;if("reducer"in a){if(n&&!Gi(a))throw new Error(Ie(17));o=a.reducer,i=a.prepare}else o=a;s.addCase(e,o).exposeCaseReducer(r,o).exposeAction(r,i?pn(e,i):pn(e))}function Vi(e){return e._reducerDefinitionType==="asyncThunk"}function Gi(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Xi({type:e,reducerName:r},n,a,s){if(!s)throw new Error(Ie(18));const{payloadCreator:o,fulfilled:i,pending:l,rejected:u,settled:h,options:c}=n,f=s(e,o,c);a.exposeAction(r,f),i&&a.addCase(f.fulfilled,i),l&&a.addCase(f.pending,l),u&&a.addCase(f.rejected,u),h&&a.addMatcher(f.settled,h),a.exposeCaseReducer(r,{fulfilled:i||Ot,pending:l||Ot,rejected:u||Ot,settled:h||Ot})}function Ot(){}function Ie(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Yi={sidebarOpen:!1,theme:"light",notifications:[],loading:{global:!1,query:!1,fields:!1,projects:!1}},gs=Ji({name:"ui",initialState:Yi,reducers:{toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setSidebarOpen:(e,r)=>{e.sidebarOpen=r.payload},setTheme:(e,r)=>{e.theme=r.payload},setGlobalLoading:(e,r)=>{e.loading.global=r.payload},setQueryLoading:(e,r)=>{e.loading.query=r.payload},setFieldsLoading:(e,r)=>{e.loading.fields=r.payload},setProjectsLoading:(e,r)=>{e.loading.projects=r.payload},addNotification:(e,r)=>{const n={...r.payload,id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()};e.notifications.push(n)},removeNotification:(e,r)=>{e.notifications=e.notifications.filter(n=>n.id!==r.payload)},clearAllNotifications:e=>{e.notifications=[]}}}),{toggleSidebar:Zi,setSidebarOpen:Ho,setTheme:Jo,setGlobalLoading:Uo,setQueryLoading:Ko,setFieldsLoading:Vo,setProjectsLoading:Go,addNotification:Xo,removeNotification:yn,clearAllNotifications:Yo}=gs.actions,eo=gs.reducer,to=Mi({reducer:{ui:eo},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),ys=()=>za(),ro=Fa,no=()=>{const e=ys(),r=()=>{e(Zi())};return t.jsx(_s,{position:"fixed",elevation:1,sx:{zIndex:n=>n.zIndex.drawer+1,backgroundColor:n=>n.palette.background.paper,color:n=>n.palette.text.primary,borderBottom:n=>`1px solid ${n.palette.divider}`},children:t.jsxs(Ts,{children:[t.jsx(ne,{edge:"start",color:"inherit","aria-label":"menu",onClick:r,sx:{mr:2},children:t.jsx(Ps,{})}),t.jsxs(k,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[t.jsx(O,{variant:"h6",component:"h1",sx:{mr:2},children:"DHR - Digit Health Reports"}),t.jsx(re,{label:"Phase 1",size:"small",color:"primary",variant:"outlined",sx:{mr:2}}),t.jsx(re,{label:"Query & Data Tables",size:"small",color:"secondary",variant:"outlined"})]}),t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(ne,{color:"inherit","aria-label":"search",disabled:!0,sx:{opacity:.5},children:t.jsx(En,{})}),t.jsx(ne,{color:"inherit","aria-label":"notifications",disabled:!0,sx:{opacity:.5},children:t.jsx(Os,{})}),t.jsx(ne,{color:"inherit","aria-label":"account",disabled:!0,sx:{opacity:.5},children:t.jsx(Rs,{})})]})]})})},bn=240,so=[{id:"direct-query",label:"Direct ES Query",icon:t.jsx(Ne,{}),path:"/direct-query",available:!0,phase:1},{id:"query-builder",label:"Query Builder",icon:t.jsx(Qt,{}),path:"/query-builder",available:!0,phase:1},{id:"multi-index-join",label:"Multi-Index Join",icon:t.jsx(In,{}),path:"/multi-index-join",available:!0,phase:1},{id:"filters",label:"Filter Library",icon:t.jsx(Wt,{}),path:"/filters",available:!1,phase:2},{id:"dashboards",label:"Dashboards",icon:t.jsx(zs,{}),path:"/dashboards",available:!1,phase:3},{id:"exports",label:"Export Center",icon:t.jsx(kn,{}),path:"/exports",available:!1,phase:4},{id:"help",label:"Help & Docs",icon:t.jsx(_n,{}),path:"/help",available:!1,phase:5}],ao=({open:e})=>{const r=ia(),n=oa(),a=(i,l)=>{l&&r(i)},s=i=>n.pathname===i,o=i=>{switch(i){case 1:return"success";case 2:return"warning";case 3:return"info";case 4:return"secondary";case 5:return"default";default:return"default"}};return t.jsxs(As,{variant:"persistent",anchor:"left",open:e,sx:{width:bn,flexShrink:0,"& .MuiDrawer-paper":{width:bn,boxSizing:"border-box",top:"64px",height:"calc(100% - 64px)",borderRight:i=>`1px solid ${i.palette.divider}`}},children:[t.jsxs(k,{sx:{p:2},children:[t.jsx(O,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Navigation"}),t.jsx(O,{variant:"caption",color:"text.secondary",children:"Phase 1: Direct Elasticsearch Query"})]}),t.jsx(Ee,{}),t.jsx(Ve,{sx:{pt:1},children:so.map(i=>t.jsx(ye,{disablePadding:!0,children:t.jsxs(dr,{onClick:()=>a(i.path,i.available),selected:s(i.path)&&i.available,disabled:!i.available,sx:{mx:1,borderRadius:1,mb:.5,"&.Mui-selected":{backgroundColor:l=>l.palette.primary.main,color:l=>l.palette.primary.contrastText,"& .MuiListItemIcon-root":{color:l=>l.palette.primary.contrastText}},"&.Mui-disabled":{opacity:.5}},children:[t.jsx(fr,{sx:{minWidth:40,color:s(i.path)&&i.available?"inherit":l=>l.palette.text.secondary},children:i.icon}),t.jsx(be,{primary:i.label,sx:{"& .MuiListItemText-primary":{fontSize:"0.875rem",fontWeight:s(i.path)&&i.available?500:400}}}),t.jsx(re,{label:`P${i.phase}`,size:"small",color:i.available?o(i.phase):"default",variant:i.available?"filled":"outlined",sx:{height:20,fontSize:"0.65rem","& .MuiChip-label":{px:1}}})]})},i.id))}),t.jsx(Ee,{sx:{mt:2}}),t.jsxs(k,{sx:{p:2},children:[t.jsx(O,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Quick Actions"}),t.jsx(Ve,{dense:!0,children:t.jsx(ye,{disablePadding:!0,children:t.jsxs(dr,{onClick:()=>r("/direct-query"),sx:{borderRadius:1,py:.5},children:[t.jsx(fr,{sx:{minWidth:32},children:t.jsx(Ne,{fontSize:"small"})}),t.jsx(be,{primary:"New Direct Query",sx:{"& .MuiListItemText-primary":{fontSize:"0.8rem"}}})]})})})]}),t.jsxs(k,{sx:{mt:"auto",p:2,borderTop:i=>`1px solid ${i.palette.divider}`},children:[t.jsx(O,{variant:"caption",color:"text.secondary",align:"center",display:"block",children:"DHR v1.0.0 - Phase 1"}),t.jsx(O,{variant:"caption",color:"text.secondary",align:"center",display:"block",children:"Digit Health Reports"})]})]})};class io extends U.Component{constructor(n){super(n);wt(this,"handleReload",()=>{window.location.reload()});wt(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,a){this.setState({error:n,errorInfo:a})}render(){return this.state.hasError?t.jsx(k,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3,backgroundColor:n=>n.palette.background.default},children:t.jsxs(k,{sx:{maxWidth:600,width:"100%"},children:[t.jsxs(ie,{severity:"error",sx:{mb:3},children:[t.jsx(Cr,{children:"Something went wrong"}),"The application encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."]}),t.jsxs(k,{sx:{textAlign:"center",mb:3},children:[t.jsx(O,{variant:"h5",gutterBottom:!0,children:"Oops! Application Error"}),t.jsx(O,{variant:"body1",color:"text.secondary",paragraph:!0,children:"We're sorry for the inconvenience. The DHR application has encountered an error."})]}),t.jsxs(k,{sx:{display:"flex",gap:2,justifyContent:"center",mb:3},children:[t.jsx(V,{variant:"contained",startIcon:t.jsx(Tn,{}),onClick:this.handleReload,children:"Reload Page"}),t.jsx(V,{variant:"outlined",onClick:this.handleReset,children:"Try Again"})]}),!1]})}):this.props.children}}const oo=({queryText:e,onQueryChange:r,disabled:n=!1,label:a="Elasticsearch Query (JSON)",placeholder:s="Enter your Elasticsearch query in JSON format...",rows:o=12})=>t.jsxs(L,{item:!0,xs:12,children:[t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:a}),t.jsx(le,{fullWidth:!0,multiline:!0,rows:o,value:e,onChange:r,placeholder:s,disabled:n,sx:{fontFamily:"monospace","& .MuiInputBase-input":{fontFamily:'Consolas, Monaco, "Courier New", monospace',fontSize:"14px"}}})]}),lo=({columns:e,rows:r,page:n,rowsPerPage:a,totalCount:s,onPageChange:o,onRowsPerPageChange:i,loading:l=!1,emptyMessage:u="No data available",dense:h=!0,rowsPerPageOptions:c=[5,10,25,50]})=>{const f=Ds(),g=w=>w!=null?typeof w=="object"?JSON.stringify(w):String(w):"-",j=w=>w!=null?typeof w=="object"?JSON.stringify(w,null,2):String(w):"No data",S=(w,_)=>w&&(w.length>30||typeof _=="object");return!r||r.length===0&&!l?t.jsx(k,{sx:{textAlign:"center",py:4},children:t.jsx(O,{color:"text.secondary",children:u})}):t.jsxs(t.Fragment,{children:[t.jsx(ot,{component:fe,variant:"outlined",children:t.jsxs(lt,{sx:{minWidth:650},size:h?"small":"medium",children:[t.jsx(ct,{children:t.jsx(je,{children:e.map(w=>t.jsx(Y,{sx:{fontWeight:"bold",backgroundColor:f.palette.grey[50]},children:w},w))})}),t.jsx(ut,{children:r.map(w=>t.jsx(je,{sx:{"&:last-child td, &:last-child th":{border:0}},children:e.map(_=>{const y=w[_],C=g(y),E=j(y),x=S(C,y);return t.jsx(Y,{sx:{maxWidth:"200px",maxHeight:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative"},children:x?t.jsx(de,{title:t.jsx(k,{component:"pre",sx:{whiteSpace:"pre-wrap",fontSize:"0.75rem",fontFamily:"monospace",maxWidth:"400px",maxHeight:"300px",overflow:"auto"},children:E}),placement:"top",arrow:!0,enterDelay:300,children:t.jsx("span",{style:{cursor:"help"},children:C})}):t.jsx("span",{children:C})},`${w.id}-${_}`)})},w.id))})]})}),t.jsx(Pn,{rowsPerPageOptions:c,component:"div",count:s,rowsPerPage:a,page:n,onPageChange:o,onRowsPerPageChange:i})]})},co="Query Examples & Guidelines",uo=[{label:"Basic Queries",examples:[{title:"Match All Documents:",code:`{
  "query": {
    "match_all": {}
  },
  "size": 10
}`},{title:"Match Specific Field:",code:`{
  "query": {
    "match": {
      "field_name": "search_value"
    }
  },
  "size": 10
}`},{title:"Term Query (Exact Match):",code:`{
  "query": {
    "term": {
      "status.keyword": "active"
    }
  },
  "size": 10
}`}]},{label:"Filters",examples:[{title:"Range Filter:",code:`{
  "query": {
    "range": {
      "age": {
        "gte": 18,
        "lte": 65
      }
    }
  },
  "size": 10
}`},{title:"Multiple Filters (AND):",code:`{
  "query": {
    "bool": {
      "must": [
        { "term": { "status.keyword": "active" } },
        { "range": { "created_at": { "gte": "2023-01-01" } } }
      ]
    }
  },
  "size": 10
}`},{title:"Exclude Filter (NOT):",code:`{
  "query": {
    "bool": {
      "must_not": [
        { "term": { "status.keyword": "deleted" } }
      ]
    }
  },
  "size": 10
}`}]},{label:"Aggregations",examples:[{title:"Terms Aggregation (Group By):",code:`{
  "size": 0,
  "aggs": {
    "status_counts": {
      "terms": {
        "field": "status.keyword",
        "size": 10
      }
    }
  }
}`},{title:"Date Histogram:",code:`{
  "size": 0,
  "aggs": {
    "monthly_counts": {
      "date_histogram": {
        "field": "created_at",
        "calendar_interval": "month"
      }
    }
  }
}`},{title:"Statistics Aggregation:",code:`{
  "size": 0,
  "aggs": {
    "age_stats": {
      "stats": {
        "field": "age"
      }
    }
  }
}`}]},{label:"Advanced",examples:[{title:"Wildcard Search:",code:`{
  "query": {
    "wildcard": {
      "name.keyword": "*john*"
    }
  },
  "size": 10
}`},{title:"Fuzzy Search:",code:`{
  "query": {
    "fuzzy": {
      "name": {
        "value": "john",
        "fuzziness": "AUTO"
      }
    }
  },
  "size": 10
}`},{title:"Multi-Match Query:",code:`{
  "query": {
    "multi_match": {
      "query": "search term",
      "fields": ["name", "description", "content"]
    }
  },
  "size": 10
}`}]}],fo=" Tip: Click the copy icon to copy examples to clipboard. Modify field names and values to match your index schema.",ho={title:co,categories:uo,tips:fo},xo=({title:e,defaultOpen:r=!1})=>{const[n,a]=d.useState(r),[s,o]=d.useState(0),[i]=d.useState(ho),l=e||i.title,u=c=>{navigator.clipboard.writeText(c)},h=c=>t.jsxs(k,{sx:{mb:2},children:[t.jsx(O,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:c.title}),t.jsxs(k,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",position:"relative"},children:[t.jsx(ne,{size:"small",sx:{position:"absolute",top:4,right:4},onClick:()=>u(c.code),children:t.jsx(Ge,{fontSize:"small"})}),t.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap"},children:c.code})]})]},c.title);return t.jsxs(k,{children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(ne,{onClick:()=>a(!n),size:"small",children:n?t.jsx(On,{}):t.jsx(Bt,{})}),t.jsx(O,{variant:"body2",color:"text.secondary",children:l}),t.jsx(_n,{sx:{fontSize:16,color:"text.disabled"}})]}),t.jsx($s,{in:n,children:t.jsxs(k,{sx:{border:1,borderColor:"divider",borderRadius:1,p:2,bgcolor:"background.paper",mb:2},children:[t.jsx(Fs,{value:s,onChange:(c,f)=>o(f),variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider",mb:2},children:i.categories.map((c,f)=>t.jsx(Ls,{label:c.label},f))}),i.categories.map((c,f)=>s===f&&t.jsxs(k,{children:[t.jsxs(O,{variant:"subtitle2",gutterBottom:!0,children:[c.label," Examples"]}),c.examples.map(h)]},f)),t.jsx(O,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:i.tips})]})})]})},po=({selectedIndex:e,availableIndexes:r,onIndexChange:n,loading:a=!1,disabled:s=!1,label:o="Select Index",loadingMessage:i="Loading indexes..."})=>t.jsxs(t.Fragment,{children:[t.jsxs(pe,{fullWidth:!0,disabled:a||s,children:[t.jsx(ve,{children:o}),t.jsx(me,{value:e,label:o,onChange:l=>n(l.target.value),children:(r||[]).map(l=>t.jsx(ee,{value:l,children:l},l))})]}),a&&t.jsxs(k,{sx:{display:"flex",alignItems:"center",mt:1},children:[t.jsx(we,{size:16}),t.jsx(O,{variant:"body2",sx:{ml:1},children:i})]})]}),mo=({open:e,anchorEl:r,onClose:n,availableColumns:a,selectedColumns:s,onColumnToggle:o,onSelectAll:i,onSelectNone:l,onReset:u,title:h="Select Columns to Display",footerMessage:c="Selected columns will be saved for this session"})=>t.jsx(Ms,{open:e,anchorEl:r,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.jsxs(k,{sx:{p:2,minWidth:300,maxWidth:400},children:[t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:h}),t.jsxs(k,{sx:{mb:2,display:"flex",gap:1,flexWrap:"wrap"},children:[t.jsx(V,{size:"small",variant:"outlined",onClick:i,children:"Select All"}),t.jsx(V,{size:"small",variant:"outlined",onClick:l,children:"Clear All"}),u&&t.jsx(V,{size:"small",variant:"outlined",color:"warning",onClick:u,children:"Reset"})]}),t.jsx(Ve,{dense:!0,sx:{maxHeight:300,overflow:"auto"},children:a.map(f=>t.jsx(ye,{disablePadding:!0,children:t.jsxs(dr,{onClick:()=>o(f),dense:!0,children:[t.jsx(fr,{sx:{minWidth:36},children:t.jsx(Ns,{checked:s.includes(f),tabIndex:-1,disableRipple:!0,size:"small"})}),t.jsx(be,{primary:f,primaryTypographyProps:{fontSize:"0.875rem",fontFamily:f.startsWith("_")?"monospace":"inherit"}})]})},f))}),t.jsx(O,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:c})]})}),Dr=({onExcelExport:e,onColumnFilterClick:r,selectedColumnsCount:n,totalColumnsCount:a,disabled:s=!1,showExcelExport:o=!0,showColumnFilter:i=!0,excelLabel:l="Export Excel",columnLabel:u="Columns"})=>t.jsxs(k,{sx:{display:"flex",gap:1},children:[o&&t.jsx(V,{variant:"outlined",startIcon:t.jsx(qs,{}),onClick:e,disabled:s,children:l}),i&&t.jsxs(V,{variant:"outlined",startIcon:t.jsx(Qs,{}),onClick:r,disabled:s,children:[u," (",n,"/",a,")"]})]}),go=({error:e,onClose:r,onRetry:n,severity:a="error",title:s="Query Execution Failed",showTitle:o=!0,context:i})=>e?t.jsx(ie,{severity:a,onClose:r||n,sx:{"& .MuiAlert-message":{fontSize:"0.95rem",lineHeight:1.5,whiteSpace:"pre-wrap"}},children:t.jsxs(k,{children:[o&&t.jsx(O,{variant:"body1",component:"div",sx:{fontWeight:"medium",mb:.5},children:i?`${i}: ${s}`:s}),t.jsx(O,{variant:"body2",component:"div",children:e})]})}):null,yo=({aggregations:e,title:r="Aggregations",defaultExpanded:n=!0})=>{const[a,s]=d.useState({});if(!e||Object.keys(e).length===0)return null;const o=y=>{s(C=>({...C,[y]:!C[y]}))},i=y=>{navigator.clipboard.writeText(y)},l=y=>y==null?"-":typeof y=="number"?y.toLocaleString():String(y),u=y=>{var C,E;return y.buckets?(C=y.buckets[0])!=null&&C.key_as_string||((E=y.buckets[0])==null?void 0:E.key)instanceof Date?"date_histogram":"terms":y.count!==void 0&&y.avg!==void 0?"stats":y.value!==void 0?"metric":y.values?"percentiles":"other"},h=y=>{switch(y){case"terms":return t.jsx(Js,{color:"primary"});case"date_histogram":return t.jsx(Hs,{color:"primary"});case"stats":return t.jsx(Wr,{color:"primary"});case"metric":return t.jsx(Bs,{color:"primary"});default:return t.jsx(Ws,{color:"primary"})}},c=(y,C)=>{const E=C.buckets,x=E.reduce((v,p)=>v+p.doc_count,0);return t.jsxs(k,{children:[t.jsxs(k,{sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[t.jsxs(O,{variant:"body2",color:"text.secondary",children:["Total Documents: ",t.jsx("strong",{children:x.toLocaleString()})]}),t.jsx(re,{label:`${E.length} buckets`,size:"small",variant:"outlined"})]}),t.jsx(ot,{component:fe,variant:"outlined",children:t.jsxs(lt,{size:"small",children:[t.jsx(ct,{children:t.jsxs(je,{children:[t.jsx(Y,{children:t.jsx("strong",{children:"Key"})}),t.jsx(Y,{align:"right",children:t.jsx("strong",{children:"Count"})}),t.jsx(Y,{align:"right",children:t.jsx("strong",{children:"Percentage"})}),E[0]&&Object.keys(E[0]).filter(v=>!["key","doc_count","key_as_string"].includes(v)).length>0&&t.jsx(Y,{children:t.jsx("strong",{children:"Sub-aggregations"})})]})}),t.jsx(ut,{children:E.map((v,p)=>{const b=x>0?(v.doc_count/x*100).toFixed(1):"0",m=Object.keys(v).filter(T=>!["key","doc_count","key_as_string"].includes(T));return t.jsxs(je,{children:[t.jsx(Y,{children:t.jsx(O,{variant:"body2",sx:{fontWeight:"medium"},children:v.key_as_string||l(v.key)})}),t.jsx(Y,{align:"right",children:v.doc_count.toLocaleString()}),t.jsx(Y,{align:"right",children:t.jsxs(k,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:1},children:[b,"%",t.jsx(k,{sx:{width:40,height:6,bgcolor:"grey.200",borderRadius:1,overflow:"hidden"},children:t.jsx(k,{sx:{width:`${b}%`,height:"100%",bgcolor:"primary.main"}})})]})}),m.length>0&&t.jsx(Y,{children:m.map(T=>t.jsx(re,{label:T,size:"small",sx:{mr:.5}},T))})]},p)})})]})})]})},f=(y,C)=>{var E,x,v,p,b;return t.jsx(k,{children:t.jsxs(Ve,{dense:!0,children:[t.jsx(ye,{children:t.jsx(be,{primary:"Count",secondary:((E=C.count)==null?void 0:E.toLocaleString())||"-"})}),t.jsx(Ee,{}),t.jsx(ye,{children:t.jsx(be,{primary:"Sum",secondary:((x=C.sum)==null?void 0:x.toLocaleString())||"-"})}),t.jsx(Ee,{}),t.jsx(ye,{children:t.jsx(be,{primary:"Average",secondary:((v=C.avg)==null?void 0:v.toFixed(2))||"-"})}),t.jsx(Ee,{}),t.jsx(ye,{children:t.jsx(be,{primary:"Minimum",secondary:((p=C.min)==null?void 0:p.toLocaleString())||"-"})}),t.jsx(Ee,{}),t.jsx(ye,{children:t.jsx(be,{primary:"Maximum",secondary:((b=C.max)==null?void 0:b.toLocaleString())||"-"})})]})})},g=(y,C)=>t.jsxs(k,{sx:{p:2,textAlign:"center"},children:[t.jsx(O,{variant:"h4",color:"primary.main",gutterBottom:!0,children:l(C.value)}),t.jsx(O,{variant:"body2",color:"text.secondary",children:y.replace(/_/g," ").toUpperCase()})]}),j=(y,C)=>t.jsx(ot,{component:fe,variant:"outlined",children:t.jsxs(lt,{size:"small",children:[t.jsx(ct,{children:t.jsxs(je,{children:[t.jsx(Y,{children:t.jsx("strong",{children:"Percentile"})}),t.jsx(Y,{align:"right",children:t.jsx("strong",{children:"Value"})})]})}),t.jsx(ut,{children:Object.entries(C.values).map(([E,x])=>t.jsxs(je,{children:[t.jsxs(Y,{children:[E,"%"]}),t.jsx(Y,{align:"right",children:l(x)})]},E))})]})}),S=(y,C)=>t.jsxs(k,{sx:{bgcolor:"grey.50",p:2,borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem",position:"relative"},children:[t.jsx(ne,{size:"small",sx:{position:"absolute",top:4,right:4},onClick:()=>i(JSON.stringify(C,null,2)),children:t.jsx(Ge,{fontSize:"small"})}),t.jsx("pre",{style:{margin:0,whiteSpace:"pre-wrap",overflow:"auto",maxHeight:"300px"},children:JSON.stringify(C,null,2)})]}),w=(y,C)=>{switch(u(C)){case"terms":case"date_histogram":return c(y,C);case"stats":return f(y,C);case"metric":return g(y,C);case"percentiles":return j(y,C);default:return S(y,C)}},_=Object.keys(e).length;return t.jsxs(ke,{elevation:2,children:[t.jsx(pt,{title:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Wr,{}),r,t.jsx(re,{label:`${_} aggregation${_!==1?"s":""}`,color:"primary",size:"small"})]})}),t.jsx(_e,{children:Object.keys(e).length===1?t.jsx(k,{children:Object.entries(e).map(([y,C])=>{const E=u(C);return t.jsxs(k,{children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[h(E),t.jsx(O,{variant:"h6",children:y.replace(/_/g," ").replace(/\b\w/g,x=>x.toUpperCase())}),t.jsx(re,{label:E.replace(/_/g," "),size:"small",variant:"outlined"})]}),w(y,C)]},y)})}):t.jsx(k,{children:Object.entries(e).map(([y,C])=>{const E=u(C),x=a[y]??n;return t.jsxs(Rn,{expanded:x,onChange:()=>o(y),sx:{mb:1},children:[t.jsx(An,{expandIcon:t.jsx(Bt,{}),children:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[h(E),t.jsx(O,{variant:"subtitle1",sx:{fontWeight:"medium"},children:y.replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())}),t.jsx(re,{label:E.replace(/_/g," "),size:"small",variant:"outlined"})]})}),t.jsx(zn,{children:w(y,C)})]},y)})})})]})},bs=({message:e="Loading...",size:r=40,backdrop:n=!1,fullScreen:a=!0})=>{const s=t.jsxs(k,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,...a&&{minHeight:"50vh"}},children:[t.jsx(we,{size:r,thickness:4}),e&&t.jsx(O,{variant:"body2",color:"text.secondary",children:e})]});return n?t.jsx(Us,{sx:{color:"#fff",zIndex:o=>o.zIndex.drawer+1,backgroundColor:"rgba(0, 0, 0, 0.7)"},open:!0,children:s}):s},vs=({index:e,query:r,from:n=0,size:a=10,autoExecute:s=!0,buttonVariant:o="outlined",buttonSize:i="medium",showIcon:l=!0,buttonText:u="Get Shareable Link"})=>{const[h,c]=d.useState(!1),[f,g]=d.useState(!1),j=d.useMemo(()=>{var v,p,b;if(!e||!r)return"";const E=new URLSearchParams;E.set("index",e),E.set("from",n.toString()),E.set("size",a.toString()),E.set("autoExecute",s.toString());try{const m=typeof r=="string"?JSON.parse(r):r;if((p=(v=m.query)==null?void 0:v.bool)!=null&&p.must?(Array.isArray(m.query.bool.must)?m.query.bool.must:[m.query.bool.must]).forEach(R=>{if(R.term){const M=Object.keys(R.term)[0],N=R.term[M],D=M.replace(".keyword","");E.set(D,N)}else if(R.match){const M=Object.keys(R.match)[0],N=R.match[M];M==="_all"?E.set("search",N):E.set(M,N)}else if(R.range){const M=Object.keys(R.range)[0],N=R.range[M];M==="created_at"&&N.gte&&N.lte?(E.set("date_from",N.gte),E.set("date_to",N.lte)):E.set(`filter_${M}`,JSON.stringify({field:M,type:"range",value:`${N.gte||""} TO ${N.lte||""}`,operator:"range"}))}else if(R.wildcard){const M=Object.keys(R.wildcard)[0],N=R.wildcard[M];E.set(`filter_${M}`,JSON.stringify({field:M,type:"wildcard",value:N,operator:"wildcard"}))}}):(b=m.query)!=null&&b.match_all||E.set("query",JSON.stringify(m)),m.sort&&m.sort.length>0){const T=Object.keys(m.sort[0])[0],R=m.sort[0][T].order||m.sort[0][T];T!=="_score"&&(E.set("sort_field",T),E.set("sort_order",R))}(m.aggs||m.aggregations)&&E.set("has_aggregations","true")}catch(m){console.error("Error parsing query:",m),E.set("query",encodeURIComponent(r))}return`${`${window.location.origin}/auto-query`}?${E.toString()}`},[e,r,n,a,s]),S=()=>{c(!0),g(!1)},w=()=>{c(!1)},_=()=>{j&&(navigator.clipboard.writeText(j),g(!0),setTimeout(()=>g(!1),2e3))},y=()=>{j&&window.open(j,"_blank")},C=d.useMemo(()=>{if(!j)return[];try{const E=new URL(j),x=[];return E.searchParams.forEach((v,p)=>{if(!["index","from","size","autoExecute","query","has_aggregations"].includes(p))if(p.startsWith("filter_"))try{const b=JSON.parse(v);x.push(`${b.field}: ${b.value}`)}catch{x.push(`${p.replace("filter_","")}: ${v}`)}else if(p==="date_from"){const b=E.searchParams.get("date_to");b&&x.push(`Date: ${v} to ${b}`)}else p!=="date_to"&&x.push(`${p}: ${v}`)}),x}catch{return[]}},[j]);return t.jsxs(t.Fragment,{children:[t.jsx(V,{variant:o,size:i,startIcon:l?t.jsx(Rt,{}):void 0,onClick:S,disabled:!e||!r,children:u}),t.jsxs(Er,{open:h,onClose:w,maxWidth:"md",fullWidth:!0,children:[t.jsxs(Ir,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Rt,{color:"primary"}),t.jsx(O,{variant:"h6",children:"Shareable Auto Query Link"})]}),t.jsx(ne,{onClick:w,size:"small",children:t.jsx(Dn,{})})]}),t.jsx(kr,{children:j?t.jsxs(t.Fragment,{children:[t.jsxs(ie,{severity:"info",sx:{mb:2},children:["This link will open in the Auto Query page with all current filters and settings applied.",s&&" The query will execute automatically when the page loads."]}),t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:"Generated URL:"}),t.jsxs(fe,{variant:"outlined",sx:{p:2,mb:2,bgcolor:"grey.50"},children:[t.jsx(le,{fullWidth:!0,multiline:!0,value:j,InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.875rem"}}}),t.jsxs(k,{sx:{display:"flex",gap:1,mt:1},children:[t.jsx(de,{title:f?"Copied!":"Copy URL",children:t.jsx(ne,{onClick:_,color:f?"success":"default",size:"small",children:f?t.jsx(hr,{}):t.jsx(Ge,{})})}),t.jsx(de,{title:"Open in new tab",children:t.jsx(ne,{onClick:y,size:"small",children:t.jsx(Br,{})})})]})]}),C.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:"Active Filters in URL:"}),t.jsx(k,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:C.map((E,x)=>t.jsx(re,{label:E,size:"small",color:"primary",variant:"outlined"},x))})]}),t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:"URL Parameters:"}),t.jsx(k,{sx:{bgcolor:"grey.100",p:1,borderRadius:1},children:t.jsxs(O,{variant:"body2",component:"div",children:[t.jsx("strong",{children:"Index:"})," ",e,t.jsx("br",{}),t.jsx("strong",{children:"From:"})," ",n,t.jsx("br",{}),t.jsx("strong",{children:"Size:"})," ",a,t.jsx("br",{}),t.jsx("strong",{children:"Auto Execute:"})," ",s?"Yes":"No"]})})]}):t.jsx(ie,{severity:"warning",children:"Please ensure you have selected an index and have a valid query before generating a shareable link."})}),t.jsxs($n,{children:[t.jsx(V,{onClick:w,children:"Close"}),j&&t.jsxs(t.Fragment,{children:[t.jsx(V,{variant:"contained",onClick:_,startIcon:f?t.jsx(hr,{}):t.jsx(Ge,{}),children:f?"Copied!":"Copy URL"}),t.jsx(V,{variant:"contained",color:"secondary",onClick:y,startIcon:t.jsx(Br,{}),children:"Open in New Tab"})]})]})]})]})},js=({selectedIndex:e,availableIndexes:r,onIndexChange:n,indexesLoading:a,queryText:s,onQueryChange:o,onExecute:i,onClear:l,loading:u,showFromSize:h=!1,from:c=0,size:f=10,onFromChange:g,onSizeChange:j,title:S="Query Configuration",showQueryGuidelines:w=!0,showShareableLink:_=!0,children:y})=>t.jsxs(ke,{elevation:2,children:[t.jsx(pt,{title:S,avatar:t.jsx(Ks,{color:"primary"})}),t.jsx(_e,{children:t.jsxs(L,{container:!0,spacing:2,children:[t.jsx(L,{item:!0,xs:12,md:h?4:6,children:t.jsx(po,{selectedIndex:e,availableIndexes:r,onIndexChange:n,loading:a})}),h&&g&&t.jsx(L,{item:!0,xs:12,md:4,children:t.jsx(le,{fullWidth:!0,type:"number",label:"From (Offset)",value:c,onChange:C=>g(Math.max(0,parseInt(C.target.value)||0)),inputProps:{min:0}})}),h&&j&&t.jsx(L,{item:!0,xs:12,md:4,children:t.jsx(le,{fullWidth:!0,type:"number",label:"Size (Limit)",value:f,onChange:C=>j(Math.max(1,Math.min(1e3,parseInt(C.target.value)||10))),inputProps:{min:1,max:1e3}})}),t.jsx(oo,{queryText:s,onQueryChange:o,disabled:u}),w&&t.jsx(L,{item:!0,xs:12,children:t.jsx(xo,{})}),t.jsx(L,{item:!0,xs:12,children:t.jsxs(k,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[t.jsx(V,{variant:"contained",startIcon:u?t.jsx(we,{size:16}):t.jsx(At,{}),onClick:i,disabled:u||!e,size:"large",children:u?"Executing...":"Execute Query"}),t.jsx(V,{variant:"outlined",startIcon:t.jsx(dt,{}),onClick:l,disabled:u,children:"Clear Results"}),_&&t.jsx(vs,{index:e,query:s,from:c,size:f,autoExecute:!0,buttonVariant:"outlined",buttonSize:"large"}),y]})})]})})]}),$r=({result:e,error:r,loading:n,columns:a,rows:s,page:o,rowsPerPage:i,totalHits:l,onPageChange:u,onRowsPerPageChange:h,onRetryError:c,selectedIndex:f,emptyMessage:g="No results found",showAggregations:j=!0,additionalActions:S,children:w})=>t.jsxs(t.Fragment,{children:[n&&t.jsx(L,{item:!0,xs:12,children:t.jsx(bs,{message:"Executing query..."})}),r&&!n&&t.jsx(L,{item:!0,xs:12,children:t.jsx(go,{error:r,onRetry:c,context:"Query Execution"})}),e&&!n&&!r&&t.jsxs(t.Fragment,{children:[j&&e.aggregations&&Object.keys(e.aggregations).length>0&&t.jsx(L,{item:!0,xs:12,children:t.jsx(yo,{aggregations:e.aggregations,title:"Query Aggregations",defaultExpanded:!0})}),t.jsx(L,{item:!0,xs:12,children:t.jsxs(ke,{elevation:2,children:[t.jsx(pt,{title:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Fn,{}),"Query Results",t.jsx(re,{label:`${l} hits in ${e.took}ms`,color:"success",size:"small"})]}),action:S}),t.jsxs(_e,{children:[t.jsx(k,{sx:{mb:2},children:t.jsxs(O,{variant:"body2",color:"text.secondary",children:[t.jsx("strong",{children:"Index:"})," ",f," |",t.jsx("strong",{children:" Shards:"})," ",e._shards.successful,"/",e._shards.total," successful |",t.jsx("strong",{children:" Timed out:"})," ",e.timed_out?"Yes":"No"]})}),t.jsx(Ee,{sx:{mb:2}}),w,t.jsx(lo,{columns:a,rows:s,page:o,rowsPerPage:i,totalCount:l,onPageChange:u,onRowsPerPageChange:h,loading:n,emptyMessage:g})]})]})})]})]});function Sr(e){const r=[];function n(a,s=""){a&&Object.entries(a).forEach(([o,i])=>{const l=s?`${s}.${o}`:o;if(i.type){const u={name:o,type:i.type,fullPath:l,isAnalyzed:i.type==="text"&&!!i.index,isKeyword:i.type==="keyword",isNumeric:["integer","long","short","byte","double","float","half_float","scaled_float"].includes(i.type),isDate:i.type==="date",isBoolean:i.type==="boolean",hasKeywordVariant:!1};i.fields&&i.fields.keyword&&(u.hasKeywordVariant=!0,r.push({name:`${o}.keyword`,type:"keyword",fullPath:`${l}.keyword`,isAnalyzed:!1,isKeyword:!0,isNumeric:!1,isDate:!1,isBoolean:!1,hasKeywordVariant:!1})),r.push(u),i.fields&&Object.entries(i.fields).forEach(([h,c])=>{h!=="keyword"&&c.type&&r.push({name:`${o}.${h}`,type:c.type,fullPath:`${l}.${h}`,isAnalyzed:c.type==="text",isKeyword:c.type==="keyword",isNumeric:["integer","long","short","byte","double","float","half_float","scaled_float"].includes(c.type),isDate:c.type==="date",isBoolean:c.type==="boolean",hasKeywordVariant:!1})})}i.properties&&n(i.properties,l)})}return e.mappings?e.mappings.properties?n(e.mappings.properties):Object.values(e.mappings).forEach(a=>{a.properties&&n(a.properties)}):e.properties&&n(e.properties),r.sort((a,s)=>a.fullPath.localeCompare(s.fullPath))}function vn(e){const r=[];return(e.isKeyword||e.hasKeywordVariant)&&r.push({value:"term",label:"Equals",description:"Exact match"},{value:"terms",label:"In",description:"Match any of the provided values"},{value:"prefix",label:"Starts with",description:"Prefix match"},{value:"wildcard",label:"Wildcard",description:"Pattern matching with * and ?"},{value:"regexp",label:"Regex",description:"Regular expression match"}),(e.isAnalyzed||e.type==="text")&&r.push({value:"match",label:"Match",description:"Text search with analysis"},{value:"match_phrase",label:"Match Phrase",description:"Exact phrase match"},{value:"match_phrase_prefix",label:"Match Phrase Prefix",description:"Phrase prefix match"},{value:"multi_match",label:"Multi Match",description:"Search across multiple fields"}),(e.isNumeric||e.isDate)&&r.push({value:"term",label:"Equals",description:"Exact match"},{value:"range",label:"Range",description:"Between values"},{value:"gt",label:"Greater than",description:">"},{value:"gte",label:"Greater or equal",description:">="},{value:"lt",label:"Less than",description:"<"},{value:"lte",label:"Less or equal",description:"<="}),e.isBoolean&&r.push({value:"term",label:"Equals",description:"Exact match"}),r.push({value:"exists",label:"Exists",description:"Field has a value"},{value:"missing",label:"Missing",description:"Field is missing or null"}),r.filter((a,s,o)=>s===o.findIndex(i=>i.value===a.value))}function bo(e,r,n){const a=e.isKeyword||e.hasKeywordVariant?e.fullPath.endsWith(".keyword")?e.fullPath:`${e.fullPath}.keyword`:e.fullPath;switch(r){case"term":return{term:{[a]:n}};case"terms":const s=Array.isArray(n)?n:n.toString().split(",").map(o=>o.trim());return{terms:{[a]:s}};case"match":return{match:{[e.fullPath]:n}};case"match_phrase":return{match_phrase:{[e.fullPath]:n}};case"match_phrase_prefix":return{match_phrase_prefix:{[e.fullPath]:n}};case"prefix":return{prefix:{[a]:n}};case"wildcard":return{wildcard:{[a]:n}};case"regexp":return{regexp:{[a]:n}};case"range":if(typeof n=="string"&&n.includes(" TO ")){const[o,i]=n.split(" TO ").map(l=>l.trim());return{range:{[e.fullPath]:{gte:o,lte:i}}}}return{range:{[e.fullPath]:{gte:n,lte:n}}};case"gt":return{range:{[e.fullPath]:{gt:n}}};case"gte":return{range:{[e.fullPath]:{gte:n}}};case"lt":return{range:{[e.fullPath]:{lt:n}}};case"lte":return{range:{[e.fullPath]:{lte:n}}};case"exists":return{exists:{field:e.fullPath}};case"missing":return{bool:{must_not:{exists:{field:e.fullPath}}}};default:return{term:{[a]:n}}}}const vo=({fields:e,loading:r=!1,onQueryGenerated:n,onConditionsChange:a,initialConditions:s=[]})=>{const[o,i]=d.useState(s.length>0?s:[{id:"1",logicalOperator:"AND",value:""}]),[l,u]=d.useState(""),[h,c]=d.useState(""),[f,g]=d.useState(!1),j=()=>Date.now().toString()+Math.random().toString(36).substr(2,9),S=d.useCallback(()=>{const x={id:j(),logicalOperator:"AND",value:""};i(v=>{const p=[...v,x];return a==null||a(p),p})},[a]),w=d.useCallback(x=>{i(v=>{const p=v.filter(b=>b.id!==x);return a==null||a(p),p})},[a]),_=d.useCallback((x,v)=>{i(p=>{const b=p.map(m=>m.id===x?{...m,...v}:m);return a==null||a(b),b})},[a]),y=d.useCallback(()=>{const x=[{id:j(),logicalOperator:"AND",value:""}];i(x),a==null||a(x),u(""),c("")},[a]),C=d.useCallback(()=>{try{c("");const x=o.filter(T=>T.field&&T.operator&&T.value.trim());if(x.length===0){const T={query:{match_all:{}},size:10},R=JSON.stringify(T,null,2);u(R),n(T);return}const v=[];let p=[];x.forEach((T,R)=>{var N;const M=bo(T.field,T.operator,T.value);T.logicalOperator==="OR"||R>0&&((N=o[R-1])==null?void 0:N.logicalOperator)==="OR"||p.length>0&&(v.push(p.length===1?p[0]:{bool:{should:p}}),p=[]),p.push(M)}),p.length>0&&v.push(p.length===1?p[0]:{bool:{should:p}});const b={query:{bool:{must:v}},size:10},m=JSON.stringify(b,null,2);u(m),n(b)}catch(x){const v=x instanceof Error?x.message:"Failed to generate query";c(v)}},[o,n]),E=d.useCallback(()=>{l&&navigator.clipboard.writeText(l)},[l]);return d.useEffect(()=>{const x=setTimeout(()=>{C()},500);return()=>clearTimeout(x)},[o,C]),t.jsxs(ke,{elevation:2,children:[t.jsx(pt,{title:"Visual Query Builder",avatar:t.jsx(Qt,{color:"primary"}),action:t.jsxs(k,{sx:{display:"flex",gap:1},children:[t.jsxs(V,{variant:"outlined",startIcon:t.jsx(Ne,{}),endIcon:f?t.jsx(On,{}):t.jsx(Bt,{}),onClick:()=>g(!f),size:"small",children:[f?"Hide":"Show"," Query JSON"]}),t.jsx(V,{variant:"outlined",startIcon:t.jsx(Vs,{}),onClick:S,size:"small",children:"Add Condition"}),t.jsx(V,{variant:"outlined",startIcon:t.jsx(dt,{}),onClick:y,size:"small",children:"Clear All"})]})}),t.jsx(_e,{children:t.jsxs(L,{container:!0,spacing:3,children:[t.jsxs(L,{item:!0,xs:12,md:f?6:12,children:[t.jsx(O,{variant:"h6",gutterBottom:!0,children:"Query Conditions"}),o.length===0&&t.jsx(ie,{severity:"info",sx:{mb:2},children:'No conditions added. Click "Add Condition" to start building your query.'}),t.jsx(k,{sx:{display:"flex",flexDirection:"column",gap:2},children:o.map((x,v)=>{var p;return t.jsx(fe,{variant:"outlined",sx:{p:2},children:t.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[v>0&&t.jsx(L,{item:!0,xs:12,children:t.jsxs(pe,{fullWidth:!0,size:"small",children:[t.jsx(ve,{children:"Logic"}),t.jsxs(me,{value:x.logicalOperator,label:"Logic",onChange:b=>_(x.id,{logicalOperator:b.target.value}),children:[t.jsx(ee,{value:"AND",children:"AND"}),t.jsx(ee,{value:"OR",children:"OR"})]})]})}),t.jsx(L,{item:!0,xs:12,sm:4,children:t.jsx(Gs,{size:"small",options:e,getOptionLabel:b=>`${b.fullPath} (${b.type})`,value:x.field||null,onChange:(b,m)=>_(x.id,{field:m||void 0,operator:void 0}),disabled:r,renderInput:b=>t.jsx(le,{...b,label:"Field",placeholder:"Select field..."}),renderOption:(b,m)=>t.jsx("li",{...b,children:t.jsxs(k,{children:[t.jsx(O,{variant:"body2",children:m.fullPath}),t.jsxs(O,{variant:"caption",color:"text.secondary",children:[m.type,m.hasKeywordVariant&&"  Has .keyword",m.isAnalyzed&&"  Analyzed"]})]})})})}),t.jsx(L,{item:!0,xs:12,sm:3,children:t.jsxs(pe,{fullWidth:!0,size:"small",disabled:!x.field,children:[t.jsx(ve,{children:"Operator"}),t.jsx(me,{value:x.operator||"",label:"Operator",onChange:b=>_(x.id,{operator:b.target.value}),children:x.field&&vn(x.field).map(b=>t.jsx(ee,{value:b.value,children:t.jsx(de,{title:b.description,placement:"right",children:t.jsx("span",{children:b.label})})},b.value))}),x.field&&t.jsx(Xs,{children:x.operator&&((p=vn(x.field).find(b=>b.value===x.operator))==null?void 0:p.description)})]})}),t.jsx(L,{item:!0,xs:12,sm:4,children:t.jsx(le,{fullWidth:!0,size:"small",label:"Value",placeholder:x.operator==="range"?"value1 TO value2":x.operator==="terms"?"value1, value2, value3":x.operator==="exists"||x.operator==="missing"?"Not needed":"Enter value...",value:x.value,onChange:b=>_(x.id,{value:b.target.value}),disabled:r||x.operator==="exists"||x.operator==="missing",multiline:x.operator==="regexp"||x.operator==="wildcard",rows:x.operator==="regexp"?2:1})}),t.jsx(L,{item:!0,xs:12,sm:1,children:t.jsx(de,{title:"Remove condition",children:t.jsx(ne,{onClick:()=>w(x.id),disabled:o.length===1,color:"error",size:"small",children:t.jsx(Ln,{})})})})]})},x.id)})})]}),f&&t.jsxs(L,{item:!0,xs:12,md:6,children:[t.jsx(O,{variant:"h6",gutterBottom:!0,children:"Generated Query"}),h&&t.jsx(ie,{severity:"error",sx:{mb:2},children:h}),t.jsxs(fe,{variant:"outlined",sx:{p:2,minHeight:300},children:[t.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[t.jsx(O,{variant:"subtitle2",color:"text.secondary",children:"Elasticsearch Query JSON"}),t.jsx(de,{title:"Copy query",children:t.jsx(ne,{onClick:E,size:"small",disabled:!l,children:t.jsx(Ge,{})})})]}),t.jsx(le,{multiline:!0,fullWidth:!0,value:l,InputProps:{readOnly:!0,sx:{fontFamily:"monospace",fontSize:"0.875rem"}},minRows:12,maxRows:20,variant:"outlined"})]})]}),o.filter(x=>x.field&&x.operator&&x.value.trim()).length>0&&t.jsx(L,{item:!0,xs:12,children:t.jsxs(fe,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:[t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:"Query Summary"}),t.jsx(k,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:o.filter(x=>x.field&&x.operator&&x.value.trim()).map((x,v)=>t.jsx(re,{size:"small",label:`${v>0?x.logicalOperator+" ":""}${x.field.fullPath} ${x.operator} ${x.value}`,variant:"outlined",color:"primary"},x.id))})]})})]})})]})},ws=({open:e,onClose:r,onSave:n,queryType:a,targetIndex:s,queryData:o,defaultName:i="",defaultDescription:l="",defaultTags:u=[]})=>{const[h,c]=d.useState(i),[f,g]=d.useState(l),[j,S]=d.useState(u),[w,_]=d.useState(""),[y,C]=d.useState(!1),[E,x]=d.useState(null);U.useEffect(()=>{e&&(c(i),g(l),S(u),_(""),x(null))},[e,i,l,u]);const v=d.useCallback(()=>{const R=w.trim();R&&!j.includes(R)&&(S(M=>[...M,R]),_(""))},[w,j]),p=d.useCallback(R=>{S(M=>M.filter(N=>N!==R))},[]),b=d.useCallback(R=>{R.key==="Enter"&&w.trim()&&(R.preventDefault(),v())},[w,v]),m=d.useCallback(async()=>{if(!h.trim()){x("Query name is required");return}C(!0),x(null);try{const R={name:h.trim(),description:f.trim()||void 0,queryType:a,targetIndex:s,queryData:o,tags:j.length>0?j:void 0};await n(R),r()}catch(R){x(R instanceof Error?R.message:"Failed to save query")}finally{C(!1)}},[h,f,a,s,o,j,n,r]),T=R=>{switch(R){case"direct":return"Direct Query";case"visual":return"Visual Query Builder";case"auto":return"Auto Query";default:return R}};return t.jsxs(Er,{open:e,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{minHeight:400}},children:[t.jsxs(Ir,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(zt,{}),"Save Query"]}),t.jsx(kr,{children:t.jsxs(k,{sx:{display:"flex",flexDirection:"column",gap:3,pt:1},children:[E&&t.jsx(ie,{severity:"error",onClose:()=>x(null),children:E}),t.jsxs(k,{sx:{display:"flex",gap:2},children:[t.jsx(le,{size:"small",label:"Query Type",value:T(a),disabled:!0,sx:{flex:1}}),t.jsx(le,{size:"small",label:"Target Index",value:s,disabled:!0,sx:{flex:1}})]}),t.jsx(le,{label:"Query Name",value:h,onChange:R=>c(R.target.value),placeholder:"Enter a descriptive name for this query",required:!0,error:!h.trim()&&E!==null,helperText:!h.trim()&&E!==null?"Query name is required":"",fullWidth:!0}),t.jsx(le,{label:"Description",value:f,onChange:R=>g(R.target.value),placeholder:"Optional description of what this query does",multiline:!0,rows:3,fullWidth:!0}),t.jsxs(k,{children:[t.jsx(O,{variant:"subtitle2",sx:{mb:1},children:"Tags"}),t.jsx(k,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:j.map(R=>t.jsx(re,{label:R,size:"small",onDelete:()=>p(R)},R))}),t.jsx(le,{size:"small",label:"Add Tag",value:w,onChange:R=>_(R.target.value),onKeyPress:b,placeholder:"Type tag name and press Enter",fullWidth:!0,InputProps:{endAdornment:t.jsx(V,{size:"small",onClick:v,disabled:!w.trim(),sx:{ml:1},children:"Add"})}})]}),t.jsx(k,{sx:{bgcolor:"grey.50",p:2,borderRadius:1},children:t.jsx(O,{variant:"caption",color:"text.secondary",children:"This query will be saved to Elasticsearch and can be accessed across all query interfaces. You can organize queries using tags and search by name, type, or index."})})]})}),t.jsxs($n,{sx:{px:3,py:2},children:[t.jsx(V,{onClick:r,disabled:y,children:"Cancel"}),t.jsx(V,{variant:"contained",onClick:m,disabled:y||!h.trim(),startIcon:y?t.jsx(we,{size:16}):t.jsx(zt,{}),children:y?"Saving...":"Save Query"})]})]})},De="/api/saved-queries";class jo{async createSavedQuery(r){var s;const a=await(await fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(!a.success)throw new Error(((s=a.error)==null?void 0:s.message)||"Failed to create saved query");return a.data}async getSavedQuery(r){var s;const a=await(await fetch(`${De}/${r}`)).json();if(!a.success)throw new Error(((s=a.error)==null?void 0:s.message)||"Failed to retrieve saved query");return a.data}async getAllSavedQueries(r={}){var i;const n=new URLSearchParams;r.queryType&&n.append("queryType",r.queryType),r.targetIndex&&n.append("targetIndex",r.targetIndex),r.tags&&r.tags.length>0&&n.append("tags",r.tags.join(",")),r.limit&&n.append("limit",r.limit.toString()),r.offset&&n.append("offset",r.offset.toString());const a=n.toString()?`${De}?${n}`:De,o=await(await fetch(a)).json();if(!o.success)throw new Error(((i=o.error)==null?void 0:i.message)||"Failed to list saved queries");return o.data}async updateSavedQuery(r,n){var o;const s=await(await fetch(`${De}/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();if(!s.success)throw new Error(((o=s.error)==null?void 0:o.message)||"Failed to update saved query");return s.data}async deleteSavedQuery(r){var s;const a=await(await fetch(`${De}/${r}`,{method:"DELETE"})).json();if(!a.success)throw new Error(((s=a.error)==null?void 0:s.message)||"Failed to delete saved query");return a.data.deleted}async executeAndTrackSavedQuery(r){var s;const a=await(await fetch(`${De}/${r}/execute`,{method:"POST"})).json();if(!a.success)throw new Error(((s=a.error)==null?void 0:s.message)||"Failed to execute saved query");return a.data.query}}const st=new jo,Fr=(e={})=>{const[r,n]=d.useState([]),[a,s]=d.useState(!1),[o,i]=d.useState(null),[l,u]=d.useState(null),{queryType:h,targetIndex:c,tags:f,limit:g=50,autoLoad:j=!0}=e,S=d.useCallback(async(v=0)=>{s(!0),i(null);try{const p=await st.getAllSavedQueries({queryType:h,targetIndex:c,tags:f,limit:g,offset:v});n(v===0?p.queries:b=>[...b,...p.queries]),u(p.pagination)}catch(p){i(p instanceof Error?p.message:"Failed to load saved queries"),v===0&&(n([]),u(null))}finally{s(!1)}},[h,c,f,g]),w=d.useCallback(async v=>{i(null);try{const p=await st.createSavedQuery(v);return n(b=>[p,...b]),l&&u(b=>b?{...b,total:b.total+1}:null),p}catch(p){throw i(p instanceof Error?p.message:"Failed to create saved query"),p}},[l]),_=d.useCallback(async(v,p)=>{i(null);try{const b=await st.updateSavedQuery(v,p);return n(m=>m.map(T=>T.id===v?b:T)),b}catch(b){throw i(b instanceof Error?b.message:"Failed to update saved query"),b}},[]),y=d.useCallback(async v=>{i(null);try{await st.deleteSavedQuery(v),n(p=>p.filter(b=>b.id!==v)),l&&u(p=>p?{...p,total:Math.max(0,p.total-1)}:null)}catch(p){throw i(p instanceof Error?p.message:"Failed to delete saved query"),p}},[l]),C=d.useCallback(async v=>{i(null);try{const p=await st.executeAndTrackSavedQuery(v);return n(b=>b.map(m=>m.id===v?{...m,metadata:{...m.metadata,executionCount:(m.metadata.executionCount||0)+1,lastExecutedAt:new Date().toISOString()}}:m)),p}catch(p){throw i(p instanceof Error?p.message:"Failed to execute saved query"),p}},[]),E=d.useCallback(()=>S(0),[S]),x=d.useCallback(()=>{i(null)},[]);return d.useEffect(()=>{j&&S(0)},[j,S]),{queries:r,loading:a,error:o,pagination:l,loadQueries:S,createQuery:w,updateQuery:_,deleteQuery:y,executeQuery:C,refresh:E,clearError:x}},wo=e=>{const r=new Date,n=new Date(e),a=Math.floor((r.getTime()-n.getTime())/1e3);return a<60?"just now":a<3600?`${Math.floor(a/60)} minutes ago`:a<86400?`${Math.floor(a/3600)} hours ago`:a<2592e3?`${Math.floor(a/86400)} days ago`:n.toLocaleDateString()},Ss=({open:e,onClose:r,onQuerySelect:n,targetIndex:a,queryType:s})=>{const[o,i]=d.useState(""),[l,u]=d.useState(""),[h,c]=d.useState(a||""),[f]=d.useState([]),[g,j]=d.useState(null),{queries:S,loading:w,error:_,pagination:y,loadQueries:C,deleteQuery:E,executeQuery:x,refresh:v,clearError:p}=Fr({queryType:l||s,targetIndex:h,tags:f,autoLoad:e}),b=d.useCallback((P,z)=>{j({element:P.currentTarget,queryId:z})},[]),m=d.useCallback(()=>{j(null)},[]),T=d.useCallback(async P=>{try{await x(P.id),n(P),r()}catch(z){console.error("Failed to execute query:",z)}},[x,n,r]),R=d.useCallback(async P=>{if(window.confirm("Are you sure you want to delete this saved query?"))try{await E(P),m()}catch(z){console.error("Failed to delete query:",z)}},[E]),M=S.filter(P=>{var z,K;return P.name.toLowerCase().includes(o.toLowerCase())||((z=P.description)==null?void 0:z.toLowerCase().includes(o.toLowerCase()))||((K=P.metadata.tags)==null?void 0:K.some(F=>F.toLowerCase().includes(o.toLowerCase())))}),N=P=>{switch(P){case"direct":return t.jsx(Ne,{fontSize:"small"});case"visual":return t.jsx(Qt,{fontSize:"small"});case"auto":return t.jsx(Rt,{fontSize:"small"});default:return t.jsx(Ne,{fontSize:"small"})}},D=P=>{switch(P){case"direct":return"primary";case"visual":return"secondary";case"auto":return"success";default:return"default"}};return t.jsxs(Er,{open:e,onClose:r,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"80vh"}},children:[t.jsxs(Ir,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Wt,{}),"Saved Queries",y&&t.jsxs(O,{variant:"caption",color:"text.secondary",children:["(",y.total," total)"]})]}),t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(de,{title:"Refresh",children:t.jsx(ne,{onClick:v,disabled:w,children:t.jsx(Tn,{})})}),t.jsx(ne,{onClick:r,children:t.jsx(Dn,{})})]})]}),t.jsxs(kr,{sx:{display:"flex",flexDirection:"column"},children:[t.jsxs(k,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[t.jsx(le,{size:"small",placeholder:"Search queries...",value:o,onChange:P=>i(P.target.value),InputProps:{startAdornment:t.jsx(Ys,{position:"start",children:t.jsx(En,{})})},sx:{flex:1,minWidth:200}}),t.jsxs(pe,{size:"small",sx:{minWidth:120},children:[t.jsx(ve,{children:"Type"}),t.jsxs(me,{value:l,onChange:P=>u(P.target.value),label:"Type",children:[t.jsx(ee,{value:"",children:"All Types"}),t.jsx(ee,{value:"direct",children:"Direct Query"}),t.jsx(ee,{value:"visual",children:"Visual Query"}),t.jsx(ee,{value:"auto",children:"Auto Query"})]})]}),!a&&t.jsx(le,{size:"small",placeholder:"Filter by index...",value:h,onChange:P=>c(P.target.value),sx:{minWidth:150}})]}),_&&t.jsx(ie,{severity:"error",sx:{mb:2},onClose:p,children:_}),t.jsx(k,{sx:{flex:1,overflow:"auto"},children:w&&S.length===0?t.jsx(k,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(we,{})}):M.length===0?t.jsx(k,{sx:{textAlign:"center",py:4},children:t.jsx(O,{variant:"body2",color:"text.secondary",children:S.length===0?"No saved queries found":"No queries match your search"})}):t.jsx(Ve,{children:M.map(P=>t.jsxs(ye,{divider:!0,sx:{"&:hover":{bgcolor:"grey.50"},cursor:"pointer"},onClick:()=>T(P),children:[t.jsx(be,{primary:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(re,{icon:N(P.queryType),label:P.queryType,size:"small",color:D(P.queryType),variant:"outlined"}),t.jsx(O,{variant:"subtitle1",component:"span",children:P.name})]}),secondary:t.jsxs(k,{sx:{mt:1},children:[P.description&&t.jsx(O,{variant:"body2",color:"text.secondary",sx:{mb:1},children:P.description}),t.jsx(k,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsxs(O,{variant:"caption",color:"text.secondary",children:["Index: ",P.targetIndex]}),P.metadata.executionCount!==void 0&&t.jsxs(O,{variant:"caption",color:"text.secondary",children:[" Executed ",P.metadata.executionCount," times"]}),t.jsxs(O,{variant:"caption",color:"text.secondary",children:[" Updated ",wo(P.metadata.updatedAt)]})]})}),P.metadata.tags&&P.metadata.tags.length>0&&t.jsx(k,{sx:{display:"flex",gap:.5,mt:1,flexWrap:"wrap"},children:P.metadata.tags.map(z=>t.jsx(re,{label:z,size:"small",variant:"outlined",sx:{height:20,fontSize:"0.65rem"}},z))})]})}),t.jsxs(Zs,{children:[t.jsx(de,{title:"Execute Query",children:t.jsx(ne,{edge:"end",onClick:z=>{z.stopPropagation(),T(P)},color:"primary",children:t.jsx(At,{})})}),t.jsx(ne,{edge:"end",onClick:z=>{z.stopPropagation(),b(z,P.id)},children:t.jsx(ea,{})})]})]},P.id))})}),y&&y.hasMore&&t.jsx(k,{sx:{display:"flex",justifyContent:"center",mt:2},children:t.jsx(V,{onClick:()=>C(y.offset+y.limit),disabled:w,startIcon:w?t.jsx(we,{size:16}):void 0,children:w?"Loading...":"Load More"})})]}),t.jsxs(ta,{anchorEl:g==null?void 0:g.element,open:!!g,onClose:m,children:[t.jsxs(ee,{onClick:()=>{const P=S.find(z=>z.id===(g==null?void 0:g.queryId));P&&T(P)},children:[t.jsx(At,{sx:{mr:1}}),"Execute Query"]}),t.jsx(Ee,{}),t.jsxs(ee,{onClick:()=>R(g.queryId),sx:{color:"error.main"},children:[t.jsx(Ln,{sx:{mr:1}}),"Delete"]})]})]})};class So{constructor(){wt(this,"client");this.client=da.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(r=>(r.headers["X-Request-ID"]=this.generateRequestId(),r.metadata={startTime:Date.now()},r),r=>Promise.reject(r)),this.client.interceptors.response.use(r=>r,r=>{var a,s,o,i,l,u,h,c,f,g;const n={message:((o=(s=(a=r.response)==null?void 0:a.data)==null?void 0:s.error)==null?void 0:o.message)||r.message||"An error occurred",code:((u=(l=(i=r.response)==null?void 0:i.data)==null?void 0:l.error)==null?void 0:u.code)||"UNKNOWN_ERROR",status:((h=r.response)==null?void 0:h.status)||500,details:(g=(f=(c=r.response)==null?void 0:c.data)==null?void 0:f.error)==null?void 0:g.details};return Promise.reject(n)})}generateRequestId(){return`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async executeDirectQuery(r){var a;const n=await this.client.post("/direct-query",r);if(!n.data.success||!n.data.data)throw new Error(((a=n.data.error)==null?void 0:a.message)||"Direct query execution failed");return n.data.data}async getAvailableIndexes(){var n;const r=await this.client.get("/direct-query/indexes");if(!r.data.success||!r.data.data)throw new Error(((n=r.data.error)==null?void 0:n.message)||"Failed to get available indexes");return r.data.data}async getIndexMapping(r){var a;const n=await this.client.get(`/direct-query/indexes/${r}/mapping`);if(!n.data.success||!n.data.data)throw new Error(((a=n.data.error)==null?void 0:a.message)||"Failed to get index mapping");return n.data.data}async healthCheck(){return(await this.client.get("/health")).data}}const cr=new So,xt={execute:e=>cr.executeDirectQuery(e),getIndexes:()=>cr.getAvailableIndexes(),getIndexMapping:e=>cr.getIndexMapping(e)},Gt=(e={})=>{const{initialQuery:r=`{
  "query": {
    "match_all": {}
  },
  "size": 10
}`,onResult:n,onError:a}=e,[s,o]=d.useState(""),[i,l]=d.useState(r),[u,h]=d.useState(null),[c,f]=d.useState(!1),[g,j]=d.useState(null),[S,w]=d.useState([]),[_,y]=d.useState(!0);d.useEffect(()=>{(async()=>{try{y(!0);const p=await xt.getIndexes();w(p),p.length>0&&!s&&o(p[0])}catch(p){let b="Failed to load indexes";p&&typeof p=="object"&&p.message?(b=`Failed to load indexes: ${p.message}`,p.code&&(b=`Failed to load indexes: ${p.code} - ${p.message}`)):p instanceof Error?b=`Failed to load indexes: ${p.message}`:b=`Failed to load indexes: ${String(p)}`;const m=b;j(m),a&&a(m)}finally{y(!1)}})()},[s,a]);const C=d.useCallback(async(v,p,b)=>{if(!s){const m="Please select an index";j(m),a&&a(m);return}if(!i.trim()){const m="Please enter a query";j(m),a&&a(m);return}try{f(!0),j(null);let m;try{m=JSON.parse(i)}catch(D){throw new Error(`Invalid JSON query: ${D instanceof Error?D.message:String(D)}`)}const T=v!==void 0?v:m.from!==void 0?m.from:0,R=p!==void 0?p:m.size!==void 0?m.size:10,M={index:s,query:m,from:T,size:R,...b!==void 0&&{_source:b}},N=await xt.execute(M);h(N),j(null),n&&n(N)}catch(m){let T="An unknown error occurred";if(m&&typeof m=="object")if(m.message)if(T=m.message,m.code&&(T=`${m.code}: ${m.message}`),m.details&&m.details.includes("index_not_found_exception")){const R=m.details.match(/no such index \[([^\]]+)\]/);R&&(T=`Index '${R[1]}' not found. Please check if the index exists and try again.`)}else m.details&&m.details.includes("parsing_exception")?T=`Query parsing error: ${m.message}. Please check your Elasticsearch query syntax.`:m.details&&m.details.includes("search_phase_execution_exception")?T=`Search execution error: ${m.message}. There may be an issue with the query or index mapping.`:m.code==="ACCESS_DENIED"?T=`Access denied: ${m.message}. Please check if you have permission to access this index.`:m.code==="INTERNAL_ERROR"&&m.details&&(m.details.includes("connection")?T="Connection error: Unable to connect to Elasticsearch. Please try again.":m.details.includes("timeout")&&(T="Request timeout: The query took too long to execute. Try simplifying your query or increasing the timeout."));else m.code&&m.status&&(T=`${m.code} (${m.status})`);else m instanceof Error?T=m.message:T=String(m);j(T),h(null),a&&a(T)}finally{f(!1)}},[s,i,n,a]),E=d.useCallback(()=>{h(null),j(null)},[]),x=d.useCallback(v=>{if(!v||v.length===0)return{columns:[],rows:[]};const p=new Set;v.forEach(T=>{if(T._source){const R=(M,N="")=>{Object.keys(M).forEach(D=>{const P=N?`${N}.${D}`:D;M[D]&&typeof M[D]=="object"&&!Array.isArray(M[D])?R(M[D],P):p.add(P)})};R(T._source)}});const b=["_id","_score",...Array.from(p).sort()],m=v.map((T,R)=>{const M={id:`${T._id}-${R}`,_id:T._id,_score:T._score},N=(D,P="")=>{Object.keys(D).forEach(z=>{const K=P?`${P}.${z}`:z;D[z]&&typeof D[z]=="object"&&!Array.isArray(D[z])?N(D[z],K):M[K]=D[z]})};return T._source&&N(T._source),M});return{columns:b,rows:m}},[]);return{selectedIndex:s,queryText:i,result:u,loading:c,error:g,availableIndexes:S,indexesLoading:_,setSelectedIndex:o,setQueryText:l,executeQuery:C,clearResults:E,formatResultsForTable:x}},Lr=(e=10)=>{const[r,n]=d.useState(0),[a,s]=d.useState(e),o=d.useCallback((h,c)=>{n(c)},[]),i=d.useCallback(h=>{s(parseInt(h.target.value,10)),n(0)},[]),l=d.useCallback(h=>{var g;if(!((g=h==null?void 0:h.hits)!=null&&g.hits))return[];const c=r*a,f=c+a;return h.hits.hits.slice(c,f)},[r,a]),u=d.useCallback(()=>{n(0)},[]);return{page:r,rowsPerPage:a,setPage:n,setRowsPerPage:s,handleChangePage:o,handleChangeRowsPerPage:i,getPaginatedHits:l,resetPagination:u}},Cs=(e,r="export")=>{const{columns:n,rows:a}=e,s=Co(n,a);Eo(s,`${r}.csv`,"text/csv;charset=utf-8;")},Co=(e,r)=>{const n=e.map(s=>jn(s)).join(","),a=r.map(s=>e.map(o=>{const i=s[o];let l="";return i==null?l="":typeof i=="object"?l=JSON.stringify(i):l=String(i),jn(l)}).join(","));return[n,...a].join(`
`)},jn=e=>e.includes(",")||e.includes('"')||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e,Eo=(e,r,n)=>{const a=new Blob(["\uFEFF"+e],{type:n}),s=window.URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=r,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)},Mr="directQuery_columnPreferences",ur=(e,r)=>{try{const n=Nr();n[e]={selectedColumns:[...r],lastUpdated:new Date().toISOString()},sessionStorage.setItem(Mr,JSON.stringify(n))}catch(n){console.warn("Failed to save column preferences:",n)}},Nr=()=>{try{const e=sessionStorage.getItem(Mr);return e?JSON.parse(e):{}}catch(e){return console.warn("Failed to load column preferences:",e),{}}},wn=e=>{var n;return((n=Nr()[e])==null?void 0:n.selectedColumns)||null},Io=e=>{try{const r=Nr();delete r[e],sessionStorage.setItem(Mr,JSON.stringify(r))}catch(r){console.warn("Failed to clear column preferences:",r)}},qr=(e={})=>{const{selectedIndex:r,selectedColumns:n}=e,a=d.useCallback(l=>{if(!l||l.length===0)return{columns:[],rows:[]};const u=new Set;l.forEach(f=>{const g=s(f._source||{});Object.keys(g).forEach(j=>u.add(j)),f._id!==void 0&&u.add("_id"),f._score!==void 0&&u.add("_score")});const h=Array.from(u).sort(),c=l.map(f=>{const j={...s(f._source||{})};return f._id!==void 0&&(j._id=f._id),f._score!==void 0&&(j._score=f._score),j});return{columns:h,rows:c}},[]),s=(l,u="")=>{const h={};for(const[c,f]of Object.entries(l)){const g=u?`${u}.${c}`:c;f==null?h[g]=f:typeof f=="object"&&!Array.isArray(f)?Object.assign(h,s(f,g)):Array.isArray(f)?h[g]=JSON.stringify(f):h[g]=f}return h},o=d.useCallback((l,u)=>{var C;if(!((C=l==null?void 0:l.hits)!=null&&C.hits)||l.hits.hits.length===0){console.warn("No data available for export");return}const{columns:h,rows:c}=a(l.hits.hits);if(h.length===0||c.length===0){console.warn("No valid data found for export");return}let f=h,g=c;if(n&&n.length>0){const E=["_id","_score"];f=h.filter(x=>n.includes(x)||E.includes(x)),g=c.map(x=>{const v={};return f.forEach(p=>{v[p]=x[p]}),v})}const j={columns:f,rows:g},S=u||"elasticsearch_query_results",w=r?`_${r}`:"",_=new Date().toISOString().split("T")[0],y=`${S}${w}_${_}`;Cs(j,y)},[a,r,n]),i=d.useCallback(l=>{var u;return!((u=l==null?void 0:l.hits)!=null&&u.hits)||l.hits.hits.length===0},[]);return{exportToExcel:o,isExportDisabled:i}},ko=()=>{var et,jt,I,q,J;const e=Gt({onResult:$=>{S(E),r.resetPagination()}}),r=Lr(10),[n,a]=d.useState(0),[s,o]=d.useState(10),[i,l]=d.useState([]),u=qr({selectedIndex:e.selectedIndex,selectedColumns:i}),[h,c]=d.useState([]),[f,g]=d.useState([]),[j,S]=d.useState(!1),[w,_]=d.useState(!1),[y,C]=d.useState(null),[E,x]=d.useState(!1),[v,p]=d.useState(!1),[b,m]=d.useState(!1),T=Fr({queryType:"direct",targetIndex:e.selectedIndex,autoLoad:!1});d.useEffect(()=>{e.selectedIndex&&(c([]),l([]),g([]),S(!1),e.clearResults())},[e.selectedIndex]),d.useEffect(()=>{var $,H;if((H=($=e.result)==null?void 0:$.hits)!=null&&H.hits&&!j&&f.length===0){const Q=new Set;e.result.hits.hits.forEach(W=>{if(W._source){const Z=(te,ue="")=>{Object.keys(te).forEach(B=>{const se=ue?`${ue}.${B}`:B;te[B]&&typeof te[B]=="object"&&!Array.isArray(te[B])?Z(te[B],se):Q.add(se)})};Z(W._source)}});const X=["_id","_score",...Array.from(Q).sort()];g(X),c(X);const A=wn(e.selectedIndex);if(A&&A.length>0){const W=A.filter(Z=>X.includes(Z));W.length>0?l(W):l(X)}else l(X)}},[e.result,j,f.length,e.selectedIndex]);const R=d.useCallback(async()=>{let $=!0;if(i.length>0){const Q=i.filter(X=>!X.startsWith("_"));Q.length>0&&($=Q,x(!0))}else{const Q=wn(e.selectedIndex);if(Q&&Q.length>0){const X=Q.filter(A=>!A.startsWith("_"));X.length>0&&Q.length<10&&($=X,x(!0))}}const H=Array.isArray($);x(H),await e.executeQuery(n,s,$)},[e,n,s,i]),M=d.useCallback($=>{e.setQueryText($.target.value)},[e]),N=d.useCallback(()=>{var Q,X;if(!((X=(Q=e.result)==null?void 0:Q.hits)!=null&&X.hits))return[];const $=r.page*r.rowsPerPage,H=$+r.rowsPerPage;return e.result.hits.hits.slice($,H)},[e.result,r.page,r.rowsPerPage]),D=d.useCallback($=>{if(!$||$.length===0)return{columns:[],rows:[]};const H=new Set;$.forEach(W=>{if(W._source){const Z=(te,ue="")=>{Object.keys(te).forEach(B=>{const se=ue?`${ue}.${B}`:B;te[B]&&typeof te[B]=="object"&&!Array.isArray(te[B])?Z(te[B],se):H.add(se)})};Z(W._source)}});const Q=["_id","_score",...Array.from(H).sort()],X=i.length>0?i.filter(W=>Q.includes(W)):Q,A=$.map((W,Z)=>{const te={id:`${W._id}-${Z}`,_id:W._id,_score:W._score},ue=(B,se="")=>{Object.keys(B).forEach(ze=>{const Qr=se?`${se}.${ze}`:ze;B[ze]&&typeof B[ze]=="object"&&!Array.isArray(B[ze])?ue(B[ze],Qr):te[Qr]=B[ze]})};return W._source&&ue(W._source),te});return{columns:X,rows:A}},[i]),{columns:P,rows:z}=e.result?D(N()):{columns:[],rows:[]},K=typeof((jt=(et=e.result)==null?void 0:et.hits)==null?void 0:jt.total)=="number"?e.result.hits.total:((J=(q=(I=e.result)==null?void 0:I.hits)==null?void 0:q.total)==null?void 0:J.value)||0,F=d.useCallback($=>{l(H=>{const Q=H.includes($)?H.filter(X=>X!==$):[...H,$];return e.selectedIndex&&ur(e.selectedIndex,Q),Q})},[e.selectedIndex]),oe=d.useCallback(()=>{const $=f.length>0?f:h;l($),e.selectedIndex&&ur(e.selectedIndex,$)},[f,h,e.selectedIndex]),ce=d.useCallback(()=>{const $=["_id"];l($),e.selectedIndex&&ur(e.selectedIndex,$)},[e.selectedIndex]),Pe=d.useCallback(()=>{e.result&&u.exportToExcel(e.result,"direct_query_results")},[e.result,u]),Oe=d.useCallback($=>{C($.currentTarget),_(!0)},[]),Ae=d.useCallback(()=>{_(!1),C(null)},[]),bt=d.useCallback(async $=>{try{await T.createQuery($)}catch(H){throw H}},[T]),Ze=d.useCallback($=>{$.queryData.rawQuery&&($.targetIndex&&e.setSelectedIndex($.targetIndex),e.setQueryText(JSON.stringify($.queryData.rawQuery,null,2)),$.queryData.from!==void 0&&a($.queryData.from),$.queryData.size!==void 0&&o($.queryData.size))},[e]),Xt=d.useCallback(()=>{!e.selectedIndex||!e.queryText.trim()||p(!0)},[e.selectedIndex,e.queryText]),vt=d.useCallback(()=>{if(!e.queryText.trim())return null;try{return{rawQuery:JSON.parse(e.queryText),from:n,size:s,_source:i.length>0?i.filter($=>!$.startsWith("_")):void 0}}catch{return null}},[e.queryText,n,s,i]);return t.jsxs(k,{sx:{p:2},children:[t.jsxs(O,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ne,{}),"Direct Elasticsearch Query"]}),t.jsxs(L,{container:!0,spacing:3,children:[t.jsx(L,{item:!0,xs:12,children:t.jsxs(js,{selectedIndex:e.selectedIndex,availableIndexes:e.availableIndexes,onIndexChange:e.setSelectedIndex,indexesLoading:e.indexesLoading,queryText:e.queryText,onQueryChange:M,onExecute:R,onClear:e.clearResults,loading:e.loading,showFromSize:!0,from:n,size:s,onFromChange:a,onSizeChange:o,children:[t.jsx(V,{variant:"outlined",startIcon:t.jsx(zt,{}),onClick:Xt,disabled:e.loading||!e.selectedIndex||!e.queryText.trim(),children:"Save Query"}),t.jsx(V,{variant:"outlined",startIcon:t.jsx(Mn,{}),onClick:()=>m(!0),disabled:e.loading,children:"Load Query"}),e.result&&z.length>0&&t.jsx(Dr,{onExcelExport:Pe,onColumnFilterClick:Oe,selectedColumnsCount:i.length,totalColumnsCount:f.length>0?f.length:h.length,disabled:e.loading})]})}),t.jsx($r,{result:e.result,error:e.error,loading:e.loading,columns:P,rows:z,page:r.page,rowsPerPage:r.rowsPerPage,totalHits:K,onPageChange:r.handleChangePage,onRowsPerPageChange:r.handleChangeRowsPerPage,onRetryError:R,selectedIndex:e.selectedIndex,emptyMessage:"No results found",children:t.jsx(mo,{open:w,anchorEl:y,onClose:Ae,availableColumns:f.length>0?f:h,selectedColumns:i,onColumnToggle:F,onSelectAll:oe,onSelectNone:ce,onReset:()=>{if(e.selectedIndex){Io(e.selectedIndex);const $=f.length>0?f:h;l($)}},footerMessage:"Selected columns will be saved for this index"})})]}),t.jsx(ws,{open:v,onClose:()=>p(!1),onSave:bt,queryType:"direct",targetIndex:e.selectedIndex||"",queryData:vt()||{},defaultName:"",defaultDescription:"",defaultTags:[]}),t.jsx(Ss,{open:b,onClose:()=>m(!1),onQuerySelect:Ze,targetIndex:e.selectedIndex,queryType:"direct"})]})},_o=()=>t.jsxs(Nn,{maxWidth:"xl",sx:{py:3},children:[t.jsxs(k,{sx:{mb:4},children:[t.jsxs(O,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ne,{}),"Direct Elasticsearch Query"]}),t.jsx(O,{variant:"body1",color:"text.secondary",children:"Execute direct Elasticsearch queries with full JSON syntax and view results in a dynamic table"})]}),t.jsx(k,{sx:{mb:3},children:t.jsxs(ie,{severity:"warning",sx:{mb:2},children:[t.jsx(Cr,{children:"Advanced Feature"}),"This tool allows direct Elasticsearch queries with full JSON syntax. Please ensure your queries are properly formatted and secure. Malformed queries may cause performance issues or errors."]})}),t.jsx(ko,{})]}),To=()=>{var m,T,R,M,N;const[e,r]=la(),[n,a]=d.useState([]),[s,o]=d.useState(!1),[i,l]=d.useState(!1),u=d.useMemo(()=>{const D=e.get("from");return D?parseInt(D):0},[e]),h=d.useMemo(()=>{const D=e.get("size");return D?parseInt(D):10},[e]),c=Gt({onResult:()=>{f.resetPagination()}}),f=Lr(10),g=qr({selectedIndex:c.selectedIndex}),j=d.useMemo(()=>{const D=[];return e.forEach((P,z)=>{if(!(z==="index"||z==="from"||z==="size"||z==="autoExecute"||z==="query"))if(z.startsWith("filter_"))try{const K=JSON.parse(P);D.push({field:K.field||z.replace("filter_",""),operator:K.operator||"term",value:K.value||P,type:K.type||"term",label:K.label||`${K.field||z.replace("filter_","")}: ${K.value||P}`})}catch{D.push({field:z.replace("filter_",""),operator:"term",value:P,type:"term",label:`${z.replace("filter_","")}: ${P}`})}else if(z.includes(".")){const K=!z.endsWith(".keyword")&&!z.includes("_id")&&!z.includes("count")&&!z.includes("amount")&&!z.includes("number")&&!z.includes("size")&&!z.includes("timestamp")&&!z.includes("date");D.push({field:K?`${z}.keyword`:z,operator:"term",value:P,type:"term",label:`${z}: ${P}`})}else switch(z){case"status":D.push({field:"status.keyword",operator:"term",value:P,type:"term",label:`Status: ${P}`});break;case"date_from":e.get("date_to")&&D.push({field:"created_at",operator:"range",value:`${P} TO ${e.get("date_to")}`,type:"range",label:`Date: ${P} to ${e.get("date_to")}`});break;case"project":D.push({field:"project.keyword",operator:"term",value:P,type:"term",label:`Project: ${P}`});break;case"user_id":D.push({field:"user_id",operator:"term",value:parseInt(P),type:"term",label:`User ID: ${P}`});break;case"search":D.push({field:"_all",operator:"match",value:P,type:"match",label:`Search: ${P}`});break;default:const K=typeof P=="string"&&!z.includes("_id")&&!z.includes("count");D.push({field:K?`${z}.keyword`:z,operator:"term",value:P,type:"term",label:`${z}: ${P}`});break}}),D},[e]),S=d.useCallback(D=>{const P=e.get("query");if(P)try{const F=JSON.parse(P);return JSON.stringify(F,null,2)}catch(F){console.error("Failed to parse query from URL:",F)}const z=[];D.forEach(F=>{switch(F.type){case"term":z.push({term:{[F.field]:F.value}});break;case"range":if(typeof F.value=="string"&&F.value.includes(" TO ")){const[oe,ce]=F.value.split(" TO ");z.push({range:{[F.field]:{gte:oe.trim(),lte:ce.trim()}}})}break;case"match":z.push({match:{[F.field]:F.value}});break;case"wildcard":z.push({wildcard:{[F.field]:F.value}});break;case"exists":z.push({exists:{field:F.field}});break}});const K={query:{bool:{must:z.length>0?z:[{match_all:{}}]}},size:h,from:u,sort:[{_score:{order:"desc"}}]};return JSON.stringify(K,null,2)},[e,h,u]);d.useEffect(()=>{const D=e.get("index");D&&c.availableIndexes.includes(D)&&c.setSelectedIndex(D)},[e,c.availableIndexes]),d.useEffect(()=>{a(j);const D=S(j);c.setQueryText(D)},[j,S,c]),d.useEffect(()=>{if((e.get("autoExecute")==="true"||n.length>0||e.get("query"))&&c.selectedIndex&&c.queryText&&!c.loading&&!c.indexesLoading&&!i){l(!0);const P=setTimeout(()=>{w()},500);return()=>clearTimeout(P)}},[c.selectedIndex,c.queryText,n,e,c.indexesLoading,c.loading,i]);const w=d.useCallback(async()=>{await c.executeQuery(u,h)},[c,u,h]),_=d.useCallback(D=>{c.setQueryText(D.target.value)},[c]),y=D=>{const P=new URLSearchParams(e),z=n[D];e.forEach((K,F)=>{if(F!=="index"&&F!=="from"&&F!=="size"&&F!=="autoExecute"){const oe=`${F}: ${K}`;(z.label===oe||F===z.field.replace(".keyword",""))&&P.delete(F)}}),r(P)},C=()=>{const D=new URLSearchParams;e.get("index")&&D.set("index",e.get("index")),e.get("from")&&D.set("from",e.get("from")),e.get("size")&&D.set("size",e.get("size")),r(D)},E=()=>{const D=window.location.href;navigator.clipboard.writeText(D),o(!0),setTimeout(()=>o(!1),2e3)},x=()=>{c.clearResults(),l(!1),f.resetPagination()},{columns:v,rows:p}=c.result?c.formatResultsForTable(f.getPaginatedHits(c.result)):{columns:[],rows:[]},b=typeof((T=(m=c.result)==null?void 0:m.hits)==null?void 0:T.total)=="number"?c.result.hits.total:((N=(M=(R=c.result)==null?void 0:R.hits)==null?void 0:M.total)==null?void 0:N.value)||0;return t.jsxs(k,{children:[t.jsxs(ke,{sx:{mb:3},elevation:2,children:[t.jsx(pt,{title:"Current URL Configuration",avatar:t.jsx(Rt,{color:"primary"}),action:t.jsx(de,{title:s?"Copied!":"Copy URL",children:t.jsx(ne,{onClick:E,color:s?"success":"default",children:s?t.jsx(hr,{}):t.jsx(Ge,{})})})}),t.jsxs(_e,{children:[t.jsx(fe,{variant:"outlined",sx:{p:2,bgcolor:"grey.50",mb:2},children:t.jsx(O,{variant:"body2",sx:{wordBreak:"break-all",fontFamily:"monospace"},children:window.location.href})}),e.toString()&&t.jsxs(k,{children:[t.jsx(O,{variant:"subtitle2",gutterBottom:!0,children:"Active Parameters:"}),t.jsx(Ve,{dense:!0,children:Array.from(e.entries()).map(([D,P])=>t.jsx(ye,{children:t.jsx(be,{primary:`${D}: ${P}`,primaryTypographyProps:{variant:"body2",fontFamily:"monospace"}})},D))})]})]})]}),n.length>0&&t.jsx(ke,{sx:{mb:3},elevation:2,children:t.jsxs(_e,{children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(Wt,{sx:{mr:1,color:"primary.main"}}),t.jsx(O,{variant:"h6",children:"Applied Filters"}),t.jsx(k,{sx:{ml:"auto"},children:t.jsx(de,{title:"Clear all filters",children:t.jsx(ne,{onClick:C,size:"small",children:t.jsx(dt,{})})})})]}),t.jsx(k,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:n.map((D,P)=>t.jsx(re,{label:D.label||`${D.field}: ${D.value}`,variant:"filled",color:"primary",onDelete:()=>y(P),deleteIcon:t.jsx(dt,{}),size:"small"},P))}),t.jsxs(ie,{severity:"info",children:[n.length," filter",n.length!==1?"s":""," applied from URL parameters.",e.get("autoExecute")==="true"?" Query will auto-execute.":" Click Execute to run the query."]})]})}),t.jsxs(L,{container:!0,spacing:3,children:[t.jsx(L,{item:!0,xs:12,children:t.jsx(js,{selectedIndex:c.selectedIndex,availableIndexes:c.availableIndexes,onIndexChange:c.setSelectedIndex,indexesLoading:c.indexesLoading,queryText:c.queryText,onQueryChange:_,onExecute:w,onClear:x,loading:c.loading,showFromSize:!1,title:"Generated Query Configuration",showQueryGuidelines:!1,children:c.result&&t.jsx(Dr,{onExcelExport:()=>g.exportToExcel(c.result,"auto_query_results"),onColumnFilterClick:()=>{},selectedColumnsCount:0,totalColumnsCount:0,disabled:g.isExportDisabled(c.result),showExcelExport:!0,showColumnFilter:!1,excelLabel:"Export Results"})})}),t.jsx($r,{result:c.result,error:c.error,loading:c.loading,columns:v,rows:p,page:f.page,rowsPerPage:f.rowsPerPage,totalHits:b,onPageChange:f.handleChangePage,onRowsPerPageChange:f.handleChangeRowsPerPage,onRetryError:w,selectedIndex:c.selectedIndex,emptyMessage:"No results found"})]})]})},Po=()=>t.jsxs(Nn,{maxWidth:"xl",sx:{py:3},children:[t.jsxs(k,{sx:{mb:4},children:[t.jsxs(O,{variant:"h4",component:"h1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Wt,{}),"Auto Query with URL Filters"]}),t.jsx(O,{variant:"body1",color:"text.secondary",children:"Automatically execute Elasticsearch queries based on URL parameters. Perfect for dashboards, bookmarks, and deep linking."})]}),t.jsx(k,{sx:{mb:3},children:t.jsxs(ie,{severity:"info",children:[t.jsx(Cr,{children:"URL-Driven Queries"}),"This interface automatically generates and executes queries based on URL parameters. Add filters to the URL like: ",t.jsx("code",{children:"?index=myindex&field=value&autoExecute=true"})]})}),t.jsx(To,{})]}),Oo=()=>{var N,D,P,z,K;const e=Gt({onResult:()=>{r.resetPagination()}}),r=Lr(10),n=qr({selectedIndex:e.selectedIndex}),[a,s]=d.useState([]),[o,i]=d.useState(!1),[l,u]=d.useState(null),[h,c]=d.useState(null),[f,g]=d.useState([]),[j,S]=d.useState(!1),[w,_]=d.useState(!1),y=Fr({queryType:"visual",targetIndex:e.selectedIndex,autoLoad:!1});d.useEffect(()=>{e.selectedIndex?C(e.selectedIndex):(s([]),u(null))},[e.selectedIndex]);const C=async F=>{try{i(!0),u(null);const ce=(await xt.getIndexMapping(F))[F];if(!ce||!ce.mappings)throw new Error(`Invalid mapping structure for index: ${F}`);const Pe=Sr(ce);if(Pe.length===0)throw new Error(`No fields found in mapping for index: ${F}`);s(Pe)}catch(oe){const ce=(oe==null?void 0:oe.message)||"Failed to load index fields";u(ce),s([])}finally{i(!1)}},E=d.useCallback(F=>{c(F),e.setQueryText(JSON.stringify(F,null,2))},[e]),x=d.useCallback(async()=>{h&&await e.executeQuery()},[e,h]),v=d.useCallback(async F=>{try{await y.createQuery(F)}catch(oe){throw oe}},[y]),p=d.useCallback(F=>{if(F.queryData.visualFields){F.targetIndex&&e.setSelectedIndex(F.targetIndex);const oe=F.queryData.visualFields.map((ce,Pe)=>({id:`condition-${Pe}`,field:ce.field,operator:ce.operator,value:ce.value,logicalOperator:"AND"}));g(oe),F.queryData.rawQuery&&(e.setQueryText(JSON.stringify(F.queryData.rawQuery,null,2)),c(F.queryData.rawQuery))}},[e]),b=d.useCallback(()=>{!e.selectedIndex||f.length===0||S(!0)},[e.selectedIndex,f]),m=d.useCallback(()=>f.length===0?null:{visualFields:f.map(F=>({field:F.field,operator:F.operator,value:F.value,type:F.type})),rawQuery:h},[f,h]),{columns:T,rows:R}=e.result?e.formatResultsForTable(r.getPaginatedHits(e.result)):{columns:[],rows:[]},M=typeof((D=(N=e.result)==null?void 0:N.hits)==null?void 0:D.total)=="number"?e.result.hits.total:((K=(z=(P=e.result)==null?void 0:P.hits)==null?void 0:z.total)==null?void 0:K.value)||0;return t.jsxs(k,{sx:{p:2},children:[t.jsxs(O,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Qt,{}),"Visual Query Builder"]}),t.jsx(O,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Build Elasticsearch queries visually by selecting fields, operators, and values. No need to write JSON manually!"}),t.jsxs(L,{container:!0,spacing:3,children:[t.jsx(L,{item:!0,xs:12,children:e.selectedIndex?t.jsxs(t.Fragment,{children:[o&&t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[t.jsx(we,{size:20}),t.jsxs(O,{variant:"body2",color:"text.secondary",children:["Loading fields for index: ",e.selectedIndex,"..."]})]}),l&&t.jsx(ie,{severity:"error",sx:{mb:2},children:l}),!o&&a.length>0&&t.jsx(vo,{fields:a,onQueryGenerated:E,onConditionsChange:g}),!o&&a.length===0&&!l&&t.jsxs(ie,{severity:"warning",sx:{mb:2},children:["No fields found for index: ",e.selectedIndex,". The index might be empty or inaccessible."]})]}):t.jsx(ie,{severity:"info",children:"Please select an index below to start building your query."})}),t.jsx(L,{item:!0,xs:12,children:t.jsx(ke,{children:t.jsx(_e,{children:t.jsxs(L,{container:!0,spacing:2,alignItems:"center",children:[t.jsx(L,{item:!0,xs:12,sm:4,children:t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Select Index"}),t.jsx(me,{value:e.selectedIndex,label:"Select Index",onChange:F=>e.setSelectedIndex(F.target.value),disabled:e.indexesLoading,children:e.availableIndexes.map(F=>t.jsx(ee,{value:F,children:F},F))})]})}),t.jsx(L,{item:!0,xs:12,sm:3,children:t.jsx(V,{variant:"contained",onClick:x,disabled:e.loading||!h||!e.selectedIndex,fullWidth:!0,size:"large",children:e.loading?"Executing...":"Execute Query"})}),t.jsx(L,{item:!0,xs:12,sm:2,children:t.jsx(V,{variant:"outlined",onClick:e.clearResults,disabled:e.loading,fullWidth:!0,size:"large",children:"Clear Results"})}),t.jsx(L,{item:!0,xs:12,sm:2,children:t.jsx(V,{variant:"outlined",startIcon:t.jsx(zt,{}),onClick:b,disabled:e.loading||!e.selectedIndex||f.length===0,fullWidth:!0,size:"large",children:"Save Query"})}),t.jsx(L,{item:!0,xs:12,sm:2,children:t.jsx(V,{variant:"outlined",startIcon:t.jsx(Mn,{}),onClick:()=>_(!0),disabled:e.loading,fullWidth:!0,size:"large",children:"Load Query"})}),t.jsx(L,{item:!0,xs:12,sm:3,children:t.jsx(vs,{index:e.selectedIndex,query:e.queryText,from:0,size:10,autoExecute:!0,buttonText:"Share Query",buttonSize:"large"})}),t.jsx(L,{item:!0,xs:12,sm:3,children:t.jsx(Dr,{onExcelExport:()=>{e.result&&n.exportToExcel(e.result,"visual_query_results")},onColumnFilterClick:()=>{},selectedColumnsCount:0,totalColumnsCount:0,disabled:n.isExportDisabled(e.result),showExcelExport:!0,showColumnFilter:!1,excelLabel:"Export Results"})})]})})})}),t.jsx($r,{result:e.result,error:e.error,loading:e.loading,columns:T,rows:R,page:r.page,rowsPerPage:r.rowsPerPage,totalHits:M,onPageChange:r.handleChangePage,onRowsPerPageChange:r.handleChangeRowsPerPage,onRetryError:x,selectedIndex:e.selectedIndex,emptyMessage:"No results found for your query"})]}),t.jsx(ws,{open:j,onClose:()=>S(!1),onSave:v,queryType:"visual",targetIndex:e.selectedIndex||"",queryData:m()||{},defaultName:"",defaultDescription:"",defaultTags:[]}),t.jsx(Ss,{open:w,onClose:()=>_(!1),onQuerySelect:p,targetIndex:e.selectedIndex,queryType:"visual"})]})},Ro=()=>t.jsx(Oo,{}),Sn="/api/multi-index-join";class Ao{async executeJoin(r){var s;const a=await(await fetch(Sn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(!a.success)throw new Error(((s=a.error)==null?void 0:s.message)||"Failed to execute multi-index join");return a.data}async getJoinPreview(r,n,a,s){var u;const o=new URLSearchParams({leftIndex:r,rightIndex:n,leftField:a,rightField:s}),l=await(await fetch(`${Sn}/preview?${o}`)).json();if(!l.success)throw new Error(((u=l.error)==null?void 0:u.message)||"Failed to get join preview");return l.data}}const Cn=new Ao,zo=()=>{const[e,r]=d.useState(null),[n,a]=d.useState(null),[s,o]=d.useState(!1),[i,l]=d.useState(null),u=d.useCallback(async g=>{o(!0),l(null);try{const j=await Cn.executeJoin(g);r(j)}catch(j){l(j instanceof Error?j.message:"Failed to execute multi-index join"),r(null)}finally{o(!1)}},[]),h=d.useCallback(async(g,j,S,w)=>{o(!0),l(null);try{const _=await Cn.getJoinPreview(g,j,S,w);a(_)}catch(_){l(_ instanceof Error?_.message:"Failed to get join preview"),a(null)}finally{o(!1)}},[]),c=d.useCallback(()=>{r(null),a(null),l(null)},[]),f=d.useCallback(()=>{l(null)},[]);return{result:e,preview:n,loading:s,error:i,executeJoin:u,getPreview:h,clearResults:c,clearError:f}},Do=()=>{const e=Gt({onResult:()=>{}}),r=zo(),[n,a]=d.useState(""),[s,o]=d.useState(""),[i,l]=d.useState(""),[u,h]=d.useState(""),[c,f]=d.useState("inner"),[g,j]=d.useState(0),[S,w]=d.useState(50),[_,y]=d.useState([]),[C,E]=d.useState([]),[x,v]=d.useState({left:!1,right:!1}),[p,b]=d.useState("preview"),[m,T]=d.useState(0),[R,M]=d.useState(10),[N,D]=d.useState(!0),[P,z]=d.useState(!1),[K,F]=d.useState(!1),oe=d.useCallback(async()=>{!n||!s||!i||!u||await r.getPreview(n,s,i,u)},[n,s,i,u,r]),ce=d.useCallback(async()=>{if(!n||!s||!i||!u)return;const q={joins:[{leftIndex:n,rightIndex:s,joinField:{left:i,right:u},joinType:c,limit:1e3}],from:g,size:S};await r.executeJoin(q)},[n,s,i,u,c,g,S,r]);d.useEffect(()=>{n?(v(I=>({...I,left:!0})),xt.getIndexMapping(n).then(I=>{const q=I[n];if(!q||!q.mappings)throw new Error(`Invalid mapping structure for index: ${n}`);const J=Sr(q);console.log(` Loaded ${J.length} fields for left index ${n}:`,J.slice(0,5).map($=>$.fullPath)),y(J)}).catch(I=>{console.error("Failed to load left index fields:",I),y([])}).finally(()=>{v(I=>({...I,left:!1}))})):(y([]),l(""))},[n]),d.useEffect(()=>{s?(v(I=>({...I,right:!0})),xt.getIndexMapping(s).then(I=>{const q=I[s];if(!q||!q.mappings)throw new Error(`Invalid mapping structure for index: ${s}`);const J=Sr(q);console.log(` Loaded ${J.length} fields for right index ${s}:`,J.slice(0,5).map($=>$.fullPath)),E(J)}).catch(I=>{console.error("Failed to load right index fields:",I),E([])}).finally(()=>{v(I=>({...I,right:!1}))})):(E([]),h(""))},[s]),d.useEffect(()=>{if(n&&s&&i&&u){const I=setTimeout(()=>{r.getPreview(n,s,i,u)},500);return()=>clearTimeout(I)}},[n,s,i,u]);const Pe=I=>{switch(I){case"inner":return"Only records that have matches in both indices";case"left":return"All records from left index, with matches from right where available";case"right":return"All records from right index, with matches from left where available";case"full":return"All records from both indices, matched where possible";default:return""}},Oe=I=>({[n]:"#1976d2",[s]:"#d32f2f"})[I]||"#666",Ae=(I,q="")=>{const J={};return Object.keys(I||{}).forEach($=>{const H=I[$],Q=q?`${q}.${$}`:$;H!==null&&typeof H=="object"&&!Array.isArray(H)&&!(H instanceof Date)?Object.assign(J,Ae(H,Q)):J[Q]=H}),J},bt=I=>{if(!I||I.length===0)return{columns:[],rows:[]};const q=new Set,J=new Set,$=new Set,H=new Set;I.forEach(A=>{if(A.leftRecord){const W=Ae(A.leftRecord);Object.keys(W).forEach(Z=>{J.add(Z),q.add(Z)})}if(A.rightRecord){const W=Ae(A.rightRecord);Object.keys(W).forEach(Z=>{$.add(Z),q.add(Z)})}}),J.forEach(A=>{$.has(A)&&H.add(A)});const Q=[];Q.push({id:"_joinKey",label:"Join Key",field:"_joinKey",merged:!0}),N?([...H].sort().forEach(A=>{Q.push({id:A,label:A,field:A,merged:!0})}),[...J].filter(A=>!H.has(A)).sort().forEach(A=>{Q.push({id:`${n}.${A}`,label:A,field:A,sourceIndex:n,color:Oe(n)})}),[...$].filter(A=>!H.has(A)).sort().forEach(A=>{Q.push({id:`${s}.${A}`,label:A,field:A,sourceIndex:s,color:Oe(s)})})):([...J].sort().forEach(A=>{Q.push({id:`${n}.${A}`,label:`[${n}] ${A}`,field:A,sourceIndex:n,color:Oe(n)})}),[...$].sort().forEach(A=>{Q.push({id:`${s}.${A}`,label:`[${s}] ${A}`,field:A,sourceIndex:s,color:Oe(s)})}));const X=I.map((A,W)=>{const Z={id:W,_joinKey:A.joinKey||"N/A"},te=A.leftRecord?Ae(A.leftRecord):{},ue=A.rightRecord?Ae(A.rightRecord):{};return Q.forEach(B=>{if(B.field!=="_joinKey"){if(B.merged){const se=te[B.field]??ue[B.field]??"";Z[B.id]=Ze(se)}else if(B.sourceIndex===n){const se=te[B.field]??"";Z[B.id]=Ze(se)}else if(B.sourceIndex===s){const se=ue[B.field]??"";Z[B.id]=Ze(se)}}}),Z});return{columns:Q,rows:X}},Ze=I=>I==null?"":typeof I=="object"?Array.isArray(I)?I.join(", "):I instanceof Date?I.toISOString():JSON.stringify(I):String(I),Xt=async(I=!1)=>{var q;if(!((q=r.result)!=null&&q.results)){console.warn("No join results available for export");return}F(!0);try{const{columns:J,rows:$}=bt(r.result.results);if(!J.length||!$.length){console.warn("No data available for export");return}const H=I||P,Q=H?$:$.slice(m*R,m*R+R);if(!Q.length){console.warn("No data on current page to export");return}const X=J.map(ue=>ue.label),A=Q.map(ue=>{const B={};return J.forEach(se=>{B[se.label]=ue[se.id]||""}),B}),W=N?"merged":"separated",Z=H?"_all":`_page${m+1}`,te=`join_${n}_${s}_${W}${Z}_${new Date().toISOString().split("T")[0]}`;Cs({columns:X,rows:A},te),console.log(` Exported ${A.length} rows with ${X.length} columns to ${te}.csv`)}catch(J){console.error("Export failed:",J)}finally{F(!1)}},vt=I=>t.jsxs(L,{container:!0,spacing:2,sx:{mb:2},children:[t.jsx(L,{item:!0,xs:6,sm:3,children:t.jsxs(fe,{sx:{p:2,textAlign:"center"},children:[t.jsx(O,{variant:"h6",color:"primary",children:I.leftIndexTotal}),t.jsx(O,{variant:"caption",children:"Left Index Records"})]})}),t.jsx(L,{item:!0,xs:6,sm:3,children:t.jsxs(fe,{sx:{p:2,textAlign:"center"},children:[t.jsx(O,{variant:"h6",color:"secondary",children:I.rightIndexTotal}),t.jsx(O,{variant:"caption",children:"Right Index Records"})]})}),t.jsx(L,{item:!0,xs:6,sm:3,children:t.jsxs(fe,{sx:{p:2,textAlign:"center"},children:[t.jsx(O,{variant:"h6",color:"success.main",children:I.joinedRecords}),t.jsx(O,{variant:"caption",children:"Matched Records"})]})}),t.jsx(L,{item:!0,xs:6,sm:3,children:t.jsxs(fe,{sx:{p:2,textAlign:"center"},children:[t.jsx(O,{variant:"h6",color:"warning.main",children:I.leftOnlyRecords+I.rightOnlyRecords}),t.jsx(O,{variant:"caption",children:"Unmatched Records"})]})})]}),et=I=>t.jsx(ot,{component:fe,sx:{maxHeight:400},children:t.jsxs(lt,{size:"small",children:[t.jsx(ct,{children:t.jsxs(je,{children:[t.jsx(Y,{children:"Join Key"}),t.jsx(Y,{children:"Join Type"}),t.jsx(Y,{children:"Left Record"}),t.jsx(Y,{children:"Right Record"})]})}),t.jsx(ut,{children:I.map((q,J)=>t.jsxs(je,{children:[t.jsx(Y,{children:q.joinKey||"N/A"}),t.jsx(Y,{children:t.jsx(re,{size:"small",label:q.joinType,color:q.joinType==="matched"?"success":"warning"})}),t.jsx(Y,{children:q.leftRecord?t.jsxs(O,{variant:"caption",sx:{fontFamily:"monospace"},children:[JSON.stringify(q.leftRecord,null,2).substring(0,100),"..."]}):"No match"}),t.jsx(Y,{children:q.rightRecord?t.jsxs(O,{variant:"caption",sx:{fontFamily:"monospace"},children:[JSON.stringify(q.rightRecord,null,2).substring(0,100),"..."]}):"No match"})]},J))})]})}),jt=I=>{const{columns:q,rows:J}=bt(I),$=J.slice(m*R,m*R+R),H=q.filter(A=>A.merged&&A.field!=="_joinKey").length,Q=q.filter(A=>A.sourceIndex===n).length,X=q.filter(A=>A.sourceIndex===s).length;return t.jsxs(k,{children:[t.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsxs(Hr,{value:N,exclusive:!0,onChange:(A,W)=>W!==null&&D(W),size:"small",children:[t.jsx(St,{value:!0,children:t.jsx(de,{title:"Merge common columns",children:t.jsx(k,{sx:{display:"flex",alignItems:"center",gap:1},children:"Merged View"})})}),t.jsx(St,{value:!1,children:t.jsx(de,{title:"Show separate columns for each index",children:t.jsx(k,{sx:{display:"flex",alignItems:"center",gap:1},children:"Separated View"})})})]}),t.jsxs(k,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t.jsx(re,{size:"small",label:n,sx:{backgroundColor:Oe(n),color:"white",fontSize:"0.75rem"}}),t.jsx(re,{size:"small",label:s,sx:{backgroundColor:Oe(s),color:"white",fontSize:"0.75rem"}})]})]}),t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(pe,{size:"small",children:t.jsxs(me,{value:P?"all":"page",onChange:A=>z(A.target.value==="all"),sx:{minWidth:120},children:[t.jsx(ee,{value:"page",children:"Current Page"}),t.jsx(ee,{value:"all",children:"All Data"})]})}),t.jsx(de,{title:`Export ${P?"All Data":"Current Page"} to Excel`,children:t.jsx(ne,{onClick:()=>Xt(),disabled:!J.length||K,color:"primary",children:K?t.jsx(we,{size:20}):t.jsx(kn,{})})})]})]}),t.jsxs(O,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:["Showing ",q.length," columns total",N?` (${H} common, ${Q} from ${n}, ${X} from ${s})`:""]}),t.jsx(ot,{component:fe,sx:{maxHeight:600,overflow:"auto"},children:t.jsxs(lt,{size:"small",stickyHeader:!0,children:[t.jsx(ct,{children:t.jsx(je,{children:q.map(A=>t.jsx(Y,{sx:{backgroundColor:A.color?`${A.color}15`:"background.paper",borderLeft:A.color?`3px solid ${A.color}`:"none",fontWeight:"bold",whiteSpace:"nowrap",minWidth:120},children:t.jsx(de,{title:`${A.sourceIndex?`From: ${A.sourceIndex}`:A.merged?"Common field":"Join Key"}`,children:t.jsxs(k,{sx:{display:"flex",alignItems:"center",gap:1},children:[A.label,A.merged&&A.field!=="_joinKey"&&t.jsx(re,{size:"small",label:"M",variant:"outlined",sx:{fontSize:"0.6rem",height:14,"& .MuiChip-label":{px:.5}}})]})})},A.id))})}),t.jsx(ut,{children:$.map(A=>t.jsx(je,{hover:!0,children:q.map(W=>t.jsx(Y,{sx:{borderLeft:W.color?`3px solid ${W.color}`:"none",maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.jsx(de,{title:String(A[W.id]||""),children:t.jsx("span",{children:String(A[W.id]||"")})})},W.id))},A.id))})]})}),t.jsx(Pn,{component:"div",count:J.length,page:m,onPageChange:(A,W)=>T(W),rowsPerPage:R,onRowsPerPageChange:A=>{M(parseInt(A.target.value,10)),T(0)},rowsPerPageOptions:[5,10,25,50]})]})};return t.jsxs(k,{sx:{p:2},children:[t.jsxs(O,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(In,{}),"Multi-Index Join"]}),t.jsx(O,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Join data from multiple Elasticsearch indices using common attributes to create consolidated results."}),t.jsxs(L,{container:!0,spacing:3,children:[t.jsx(L,{item:!0,xs:12,children:t.jsx(ke,{children:t.jsxs(_e,{children:[t.jsxs(O,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[t.jsx(ra,{}),"Join Configuration"]}),t.jsxs(L,{container:!0,spacing:2,children:[t.jsx(L,{item:!0,xs:12,md:6,children:t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Left Index"}),t.jsx(me,{value:n,label:"Left Index",onChange:I=>a(I.target.value),disabled:e.indexesLoading,children:e.availableIndexes.map(I=>t.jsx(ee,{value:I,children:I},I))})]})}),t.jsx(L,{item:!0,xs:12,md:6,children:t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Right Index"}),t.jsx(me,{value:s,label:"Right Index",onChange:I=>o(I.target.value),disabled:e.indexesLoading,children:e.availableIndexes.map(I=>t.jsx(ee,{value:I,children:I},I))})]})}),t.jsx(L,{item:!0,xs:12,md:6,children:t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Left Join Field"}),t.jsx(me,{value:i,label:"Left Join Field",onChange:I=>l(I.target.value),disabled:!n||x.left,onOpen:()=>console.log(" Left field dropdown opened. Available fields:",_.length,_.slice(0,3).map(I=>I.fullPath)),children:_.map(I=>t.jsx(ee,{value:I.fullPath,children:t.jsxs(k,{children:[t.jsx(O,{variant:"body2",children:I.fullPath}),t.jsx(O,{variant:"caption",color:"text.secondary",children:I.type})]})},I.fullPath))}),x.left&&t.jsx(O,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:"Loading fields..."})]})}),t.jsx(L,{item:!0,xs:12,md:6,children:t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Right Join Field"}),t.jsx(me,{value:u,label:"Right Join Field",onChange:I=>h(I.target.value),disabled:!s||x.right,onOpen:()=>console.log(" Right field dropdown opened. Available fields:",C.length,C.slice(0,3).map(I=>I.fullPath)),children:C.map(I=>t.jsx(ee,{value:I.fullPath,children:t.jsxs(k,{children:[t.jsx(O,{variant:"body2",children:I.fullPath}),t.jsx(O,{variant:"caption",color:"text.secondary",children:I.type})]})},I.fullPath))}),x.right&&t.jsx(O,{variant:"caption",color:"text.secondary",sx:{mt:.5},children:"Loading fields..."})]})}),t.jsxs(L,{item:!0,xs:12,md:6,children:[t.jsxs(pe,{fullWidth:!0,children:[t.jsx(ve,{children:"Join Type"}),t.jsxs(me,{value:c,label:"Join Type",onChange:I=>f(I.target.value),children:[t.jsx(ee,{value:"inner",children:"Inner Join"}),t.jsx(ee,{value:"left",children:"Left Join"}),t.jsx(ee,{value:"right",children:"Right Join"}),t.jsx(ee,{value:"full",children:"Full Outer Join"})]})]}),t.jsx(O,{variant:"caption",color:"text.secondary",sx:{mt:1},children:Pe(c)})]}),t.jsx(L,{item:!0,xs:6,md:3,children:t.jsx(le,{fullWidth:!0,type:"number",label:"From (Offset)",value:g,onChange:I=>j(Math.max(0,parseInt(I.target.value)||0)),inputProps:{min:0}})}),t.jsx(L,{item:!0,xs:6,md:3,children:t.jsx(le,{fullWidth:!0,type:"number",label:"Size (Limit)",value:S,onChange:I=>w(Math.max(1,Math.min(1e3,parseInt(I.target.value)||50))),inputProps:{min:1,max:1e3}})})]}),t.jsx(Ee,{sx:{my:2}}),t.jsxs(k,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[t.jsx(V,{variant:"outlined",startIcon:r.loading?t.jsx(we,{size:16}):t.jsx(na,{}),onClick:oe,disabled:r.loading||!n||!s||!i||!u,children:r.loading?"Loading...":"Preview Join"}),t.jsx(V,{variant:"contained",startIcon:r.loading?t.jsx(we,{size:16}):t.jsx(At,{}),onClick:ce,disabled:r.loading||!n||!s||!i||!u,size:"large",children:r.loading?"Executing...":"Execute Join"}),t.jsx(V,{variant:"outlined",startIcon:t.jsx(dt,{}),onClick:r.clearResults,disabled:r.loading,children:"Clear Results"})]})]})})}),r.error&&t.jsx(L,{item:!0,xs:12,children:t.jsx(ie,{severity:"error",onClose:r.clearError,children:r.error})}),r.preview&&t.jsx(L,{item:!0,xs:12,children:t.jsxs(Rn,{defaultExpanded:!0,children:[t.jsx(An,{expandIcon:t.jsx(Bt,{}),children:t.jsx(O,{variant:"h6",children:"Join Preview & Compatibility"})}),t.jsxs(zn,{children:[vt(r.preview.joinSummary),r.preview.preview.length>0?t.jsxs(t.Fragment,{children:[t.jsx(O,{variant:"subtitle1",sx:{mb:2},children:"Sample Joined Records:"}),et(r.preview.preview)]}):t.jsx(ie,{severity:"warning",children:"No matching records found. Check that your join fields contain compatible values."}),Object.keys(r.preview.sampleJoinKeys).length>0&&t.jsxs(k,{sx:{mt:2},children:[t.jsx(O,{variant:"subtitle2",sx:{mb:1},children:"Sample Join Key Distribution:"}),t.jsx(k,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(r.preview.sampleJoinKeys).map(([I,q])=>t.jsx(re,{size:"small",label:`${I}: ${q}`,variant:"outlined"},I))})]})]})]})}),r.result&&t.jsx(L,{item:!0,xs:12,children:t.jsx(ke,{children:t.jsxs(_e,{children:[t.jsxs(k,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(O,{variant:"h6",children:["Join Results (",r.result.totalResults," total, showing ",r.result.results.length,")"]}),t.jsxs(Hr,{value:p,exclusive:!0,onChange:(I,q)=>q!==null&&b(q),size:"small",children:[t.jsxs(St,{value:"preview",children:[t.jsx(sa,{sx:{mr:1}}),"Preview"]}),t.jsxs(St,{value:"table",children:[t.jsx(Fn,{sx:{mr:1}}),"Table"]})]})]}),vt(r.result.joinSummary),r.result.results.length>0?t.jsx(t.Fragment,{children:p==="preview"?t.jsxs(t.Fragment,{children:[t.jsx(O,{variant:"subtitle1",sx:{mb:2},children:"Joined Data (Preview):"}),et(r.result.results)]}):t.jsxs(t.Fragment,{children:[t.jsx(O,{variant:"subtitle1",sx:{mb:2},children:"Joined Data (Table):"}),jt(r.result.results)]})}):t.jsx(ie,{severity:"info",children:"No results found for the specified join criteria."})]})})})]})]})},$o=()=>t.jsx(Do,{}),Fo=()=>{const e=ys(),{enqueueSnackbar:r,closeSnackbar:n}=xi(),{sidebarOpen:a,notifications:s,loading:o}=ro(i=>i.ui);return d.useEffect(()=>{s.forEach(i=>{r(i.message,{key:i.id,variant:i.type,autoHideDuration:i.autoHide!==!1?5e3:null,action:l=>t.jsx("button",{onClick:()=>{n(l),e(yn(i.id))},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"8px"},children:""}),onExited:()=>{e(yn(i.id))}})})},[s,r,n,e]),o.global?t.jsx(bs,{message:"Loading DHR..."}):t.jsx(io,{children:t.jsxs(k,{sx:{display:"flex",height:"100vh"},children:[t.jsx(qn,{}),t.jsx(no,{}),t.jsx(ao,{open:a}),t.jsx(k,{component:"main",sx:{flexGrow:1,mt:"64px",ml:a?"240px":"0px",transition:i=>i.transitions.create(["margin"],{easing:i.transitions.easing.sharp,duration:i.transitions.duration.leavingScreen}),height:"calc(100vh - 64px)",overflow:"auto",backgroundColor:i=>i.palette.background.default},children:t.jsxs(ca,{children:[t.jsx(Be,{path:"/",element:t.jsx(Jr,{to:"/direct-query",replace:!0})}),t.jsx(Be,{path:"/direct-query",element:t.jsx(_o,{})}),t.jsx(Be,{path:"/auto-query",element:t.jsx(Po,{})}),t.jsx(Be,{path:"/query-builder",element:t.jsx(Ro,{})}),t.jsx(Be,{path:"/multi-index-join",element:t.jsx($o,{})}),t.jsx(Be,{path:"*",element:t.jsx(Jr,{to:"/direct-query",replace:!0})})]})})]})})},qt={palette:{mode:"light",primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0",contrastText:"#ffffff"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2",contrastText:"#ffffff"},background:{default:"#f5f5f5",paper:"#ffffff"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"},warning:{main:"#ed6c02",light:"#ff9800",dark:"#e65100"},error:{main:"#d32f2f",light:"#f44336",dark:"#c62828"},info:{main:"#0288d1",light:"#03a9f4",dark:"#01579b"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"}},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:300,lineHeight:1.2},h2:{fontSize:"2rem",fontWeight:400,lineHeight:1.2},h3:{fontSize:"1.75rem",fontWeight:400,lineHeight:1.2},h4:{fontSize:"1.5rem",fontWeight:500,lineHeight:1.2},h5:{fontSize:"1.25rem",fontWeight:500,lineHeight:1.2},h6:{fontSize:"1rem",fontWeight:500,lineHeight:1.2},subtitle1:{fontSize:"1rem",fontWeight:400,lineHeight:1.75},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.57},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.5},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.43},button:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.75,textTransform:"none"},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.66},overline:{fontSize:"0.75rem",fontWeight:400,lineHeight:2.66,textTransform:"uppercase"}},shape:{borderRadius:8},spacing:8},Lo={...qt,palette:{...qt.palette,mode:"light"},custom:{dataGrid:{headerBackgroundColor:"#fafafa",borderColor:"rgba(224, 224, 224, 1)"},queryBuilder:{editorBorderColor:"rgba(0, 0, 0, 0.23)",editorFocusColor:"#1976d2",editorErrorColor:"#d32f2f"}}},Mo={...qt,palette:{...qt.palette,mode:"dark",background:{default:"#121212",paper:"#1e1e1e"},text:{primary:"rgba(255, 255, 255, 0.87)",secondary:"rgba(255, 255, 255, 0.6)"}},custom:{dataGrid:{headerBackgroundColor:"#2c2c2c",borderColor:"rgba(255, 255, 255, 0.12)"},queryBuilder:{editorBorderColor:"rgba(255, 255, 255, 0.23)",editorFocusColor:"#90caf9",editorErrorColor:"#f44336"}}},Es=Qn({...Lo,components:{MuiCard:{styleOverrides:{root:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 16px rgba(0,0,0,0.12)"}}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8,boxShadow:"none","&:hover":{boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8}}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 1px 3px rgba(0,0,0,0.12)"}}}}});Qn({...Mo,components:{...Es.components}});const No=Es;xr.createRoot(document.getElementById("root")).render(t.jsx(U.StrictMode,{children:t.jsx(Oa,{store:to,children:t.jsx(ua,{children:t.jsxs(aa,{theme:No,children:[t.jsx(qn,{}),t.jsx(hi,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:5e3,children:t.jsx(Fo,{})})]})})})}));
//# sourceMappingURL=index-Bb947Zgn.js.map
